!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=document.createElement("style");l.innerHTML=".item a[data-v-a4698d26]{margin-left:10px}.item a[data-v-a4698d26]:first-child{margin-left:0}\n",document.head.appendChild(l),System.register(["../../static/js/index-legacy-4f5f4a53.js","../_vue@2.6.11@vue-legacy/_vue@2.6.11@vue.841ea4d1.js","../_async-validator@1.8.5@async-validator-legacy/_async-validator@1.8.5@async-validator.7dd80777.js","../_babel-runtime@6.26.0@babel-runtime-legacy/_babel-runtime@6.26.0@babel-runtime.ad830da6.js","../_core-js@2.6.12@core-js-legacy/_core-js@2.6.12@core-js.fb62dcae.js","../_vue-router@3.6.5@vue-router-legacy/_vue-router@3.6.5@vue-router.83f42fa2.js","../_vuex@3.6.2@vuex-legacy/_vuex@3.6.2@vuex.d925beb9.js","../_element-ui@2.15.12@element-ui-legacy/_element-ui@2.15.12@element-ui.d28eec3b.js","../_deepmerge@1.5.2@deepmerge-legacy/_deepmerge@1.5.2@deepmerge.4bb7376b.js","../_resize-observer-polyfill@1.5.1@resize-observer-polyfill-legacy/_resize-observer-polyfill@1.5.1@resize-observer-polyfill.70aaf03b.js","../_throttle-debounce@1.1.0@throttle-debounce-legacy/_throttle-debounce@1.1.0@throttle-debounce.14bdd61a.js","../_lodash@4.17.21@lodash-legacy/_lodash@4.17.21@lodash.663713e6.js","../_babel-helper-vue-jsx-merge-props@2.0.3@babel-helper-vue-jsx-merge-props-legacy/_babel-helper-vue-jsx-merge-props@2.0.3@babel-helper-vue-jsx-merge-props.249d752d.js","../_normalize-wheel@1.0.1@normalize-wheel-legacy/_normalize-wheel@1.0.1@normalize-wheel.25f995f7.js","../_mavon-editor@2.10.4@mavon-editor-legacy/_mavon-editor@2.10.4@mavon-editor.c54f996c.js","../_vue-prism-editor@1.3.0@vue-prism-editor-legacy/_vue-prism-editor@1.3.0@vue-prism-editor.fcf380ad.js","../_prismjs@1.29.0@prismjs-legacy/_prismjs@1.29.0@prismjs.9136df25.js"],(function(t){"use strict";var n;return{setters:[function(e){n=e.n},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var i=function(){var e={fileId:"",file:"",refs:"",_this:null,type:"slice",fileSize:5242880,fileName:"",isSort:!0,success:function(e){},fail:function(e){}};if((e=r(r({},e),arguments.length<=0?void 0:arguments[0])).fileId||e.file||e.refs)if(!e.refs||e._this)if(e.type){var t=null;e.refs&&(t=e._this.$refs[e.refs].files),e.fileId&&(t=document.querySelector("#".concat(e.fileId)).files),e.file&&(t=e.file),"slice"==e.type&&l(t[0],e),"merge"==e.type&&s(t,e)}else e.fail({code:-1,msg:"type must be not null"});else e.fail({code:-1,msg:"_this must be not null"});else e.fail({code:-1,msg:"fileId or file or refs must be not null"})},l=function(e,t){for(var n=[],r=0;r<e.size;r+=t.fileSize){var i=parseInt(r/t.fileSize)+1,l={sort:i,file:e.slice(r,t.fileSize*i),file_name:"".concat(e.name,"-index")};n.push(l)}t.success({code:200,fileList:n,file_name:e.name})},s=function(t,n,r){var i=[];if(t.length){if(n.isSort){for(var l=[],s=0;s<t.length;s++)l.push(t[s].name);(l=l.sort()).forEach((function(e){for(var n=0;n<t.length;n++)t[n].name==e&&i.push(t[n].slice(0,t[n].size))}))}else i=e(t).map((function(e){return e.slice(0,e.size)}));var a=r||t[0].name.replace(/-\d+$/,""),o=new File(i,a);n.success({code:200,file:o,file_name:a})}else n.fail({code:-1,msg:"files is null"})},a={props:{newIndex:{type:Boolean,default:function(){return!1}}},data:function(){return{code1:'\n/*\n * @name 文件切片与还原 合并文件要和切片的文件相同\n * @parame fileId 读取文件的 id 可选 fileId/file/refs 任选其一\n * @parame file 文件本身 可选 fileId/file/refs 任选其一\n * @parame refs vue的ref 可选 fileId/file/refs 任选其一\n * @parame _this 全局的this指向 refs不为空可选\n * @parame type Slice 分片 Merge 合并 \n * @parame fileSize 切片大小 默认 5M\n * @parame fileName 合并的文件名称\n * @parame isSort 合并进行排序\n * @method fail 错误返回\n * @method success 成功返回 返回数据为下面的数据\n * @return { 分片返回\n     code : 200,\n     fileList : [\n        {\n            sort : number, //排序\n            file : file, //文件bold\n            file_name : string ,//文件名称\n        }\n     ], //文件分片的list数据\n     file_name : files.name //文件名称\n * }\n * @return { 合并返回\n     code : 200,\n     file : file, //文件 blod数据\n     file_name : string //文件名称\n * }\n*/ \n//使用\nimport {fileSliceAndMerge} from "@/utils/file-slice-and-merge"\n// 切片\nchangeFile1(){\n    fileSliceAndMerge({\n        refs : "myfile",\n        _this : this,\n        fileSize :1024 * 1024 * 5,\n        success : (res)=>{\n            res.fileList.forEach((v ,index) =>{\n                \n            })\n        }\n    })\n},\n',code2:'\n// 合并\nchangeFile2(){\n    fileSliceAndMerge({\n        refs : "myfile1",\n        _this : this,\n        type : "merge",\n        success : (res)=>{\n            \n        }\n    })\n},\n'}},mounted:function(){},methods:{changeFile1:function(){var e=this;i({refs:"myfile",_this:this,fileSize:5242880,success:function(t){t.fileList.forEach((function(n,r){e.downFile(n.file,t.file_name+"-"+n.sort)}))}})},changeFile2:function(){var e=this;i({refs:"myfile1",_this:this,type:"merge",success:function(t){e.downFile(t.file,t.file_name)}})},downFile:function(e,t){var n=document.createElement("a");n.setAttribute("download",t),n.href=URL.createObjectURL(e),n.click()}}},o={},f=n(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.newIndex?e._e():n("dzs-header",{attrs:{title:"vue动态路由"}}),n("div",{staticClass:"page"},[n("div",{staticClass:"tips-box"},[e._v("大文件的切片和分割")]),n("h2",[e._v("切片")]),n("div",{staticClass:"item"},[n("input",{ref:"myfile",attrs:{type:"file"},on:{change:e.changeFile1}}),n("dzs-code",{attrs:{title:"源代码",value:e.code1}})],1),n("h2",[e._v("合并")]),n("div",{staticClass:"item"},[n("input",{ref:"myfile1",attrs:{type:"file",multiple:""},on:{change:e.changeFile2}}),n("dzs-code",{attrs:{title:"源代码",value:e.code2}})],1),n("h2",[e._v("源代码下载/查看")]),e._m(0)]),e.newIndex?e._e():n("el-backtop",{attrs:{"visibility-height":20}})],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item"},[n("a",{attrs:{target:"_blank",href:"https://github.com/zsduan/zsduan-summary/blob/master/src/utils/file-slice-and-merge.js"}},[e._v("下载/查看地址")])])}],!1,c,"a4698d26",null,null);function c(e){for(var t in o)this[t]=o[t]}t("default",function(){return f.exports}())}}}))}();
