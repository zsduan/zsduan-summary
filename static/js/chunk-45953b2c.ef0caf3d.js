(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45953b2c","chunk-2d20ec53"],{5352:function(e,t,n){"use strict";n("5c21")},"5c21":function(e,t,n){},"69a0":function(e,t,n){(function(t){e.exports=t()})((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];n+=(r&i|~r&s)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,s+=(n&r|~n&i)+t[1]-389564586|0,s=(s<<12|s>>>20)+n|0,i+=(s&n|~s&r)+t[2]+606105819|0,i=(i<<17|i>>>15)+s|0,r+=(i&s|~i&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&s)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,s+=(n&r|~n&i)+t[5]+1200080426|0,s=(s<<12|s>>>20)+n|0,i+=(s&n|~s&r)+t[6]-1473231341|0,i=(i<<17|i>>>15)+s|0,r+=(i&s|~i&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&s)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,s+=(n&r|~n&i)+t[9]-1958414417|0,s=(s<<12|s>>>20)+n|0,i+=(s&n|~s&r)+t[10]-42063|0,i=(i<<17|i>>>15)+s|0,r+=(i&s|~i&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&s)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,s+=(n&r|~n&i)+t[13]-40341101|0,s=(s<<12|s>>>20)+n|0,i+=(s&n|~s&r)+t[14]-1502002290|0,i=(i<<17|i>>>15)+s|0,r+=(i&s|~i&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+i|0,n+=(r&s|i&~s)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,s+=(n&i|r&~i)+t[6]-1069501632|0,s=(s<<9|s>>>23)+n|0,i+=(s&r|n&~r)+t[11]+643717713|0,i=(i<<14|i>>>18)+s|0,r+=(i&n|s&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+i|0,n+=(r&s|i&~s)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,s+=(n&i|r&~i)+t[10]+38016083|0,s=(s<<9|s>>>23)+n|0,i+=(s&r|n&~r)+t[15]-660478335|0,i=(i<<14|i>>>18)+s|0,r+=(i&n|s&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+i|0,n+=(r&s|i&~s)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,s+=(n&i|r&~i)+t[14]-1019803690|0,s=(s<<9|s>>>23)+n|0,i+=(s&r|n&~r)+t[3]-187363961|0,i=(i<<14|i>>>18)+s|0,r+=(i&n|s&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+i|0,n+=(r&s|i&~s)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,s+=(n&i|r&~i)+t[2]-51403784|0,s=(s<<9|s>>>23)+n|0,i+=(s&r|n&~r)+t[7]+1735328473|0,i=(i<<14|i>>>18)+s|0,r+=(i&n|s&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+i|0,n+=(r^i^s)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,s+=(n^r^i)+t[8]-2022574463|0,s=(s<<11|s>>>21)+n|0,i+=(s^n^r)+t[11]+1839030562|0,i=(i<<16|i>>>16)+s|0,r+=(i^s^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^s)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,s+=(n^r^i)+t[4]+1272893353|0,s=(s<<11|s>>>21)+n|0,i+=(s^n^r)+t[7]-155497632|0,i=(i<<16|i>>>16)+s|0,r+=(i^s^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^s)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,s+=(n^r^i)+t[0]-358537222|0,s=(s<<11|s>>>21)+n|0,i+=(s^n^r)+t[3]-722521979|0,i=(i<<16|i>>>16)+s|0,r+=(i^s^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^s)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,s+=(n^r^i)+t[12]-421815835|0,s=(s<<11|s>>>21)+n|0,i+=(s^n^r)+t[15]+530742520|0,i=(i<<16|i>>>16)+s|0,r+=(i^s^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+i|0,n+=(i^(r|~s))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,s+=(r^(n|~i))+t[7]+1126891415|0,s=(s<<10|s>>>22)+n|0,i+=(n^(s|~r))+t[14]-1416354905|0,i=(i<<15|i>>>17)+s|0,r+=(s^(i|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~s))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,s+=(r^(n|~i))+t[3]-1894986606|0,s=(s<<10|s>>>22)+n|0,i+=(n^(s|~r))+t[10]-1051523|0,i=(i<<15|i>>>17)+s|0,r+=(s^(i|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~s))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,s+=(r^(n|~i))+t[15]-30611744|0,s=(s<<10|s>>>22)+n|0,i+=(n^(s|~r))+t[6]-1560198380|0,i=(i<<15|i>>>17)+s|0,r+=(s^(i|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~s))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,s+=(r^(n|~i))+t[11]-1120210379|0,s=(s<<10|s>>>22)+n|0,i+=(n^(s|~r))+t[2]+718787259|0,i=(i<<15|i>>>17)+s|0,r+=(s^(i|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=s+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function s(e){var t,i,s,o,f,a,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,r(e.substring(t-64,t)));for(e=e.substring(t-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(n(u,s),t=0;t<16;t+=1)s[t]=0;return o=8*l,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),a=parseInt(o[1],16)||0,s[14]=f,s[15]=a,n(u,s),u}function o(e){var t,r,s,o,f,a,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,i(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),r=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)s[t>>2]|=e[t]<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(n(u,s),t=0;t<16;t+=1)s[t]=0;return o=8*l,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),a=parseInt(o[1],16)||0,s[14]=f,s[15]=a,n(u,s),u}function f(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=f(e[t]);return e.join("")}function l(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,r=e.length,i=new ArrayBuffer(r),s=new Uint8Array(i);for(n=0;n<r;n+=1)s[n]=e.charCodeAt(n);return t?s:i}function c(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function h(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function d(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==a(s("hello"))&&function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,s,o,f,a=this.byteLength,l=t(n,a),u=a;return r!==e&&(u=t(r,a)),l>u?new ArrayBuffer(0):(i=u-l,s=new ArrayBuffer(i),o=new Uint8Array(s),f=new Uint8Array(this,l,i),o.set(f),s)}}(),p.prototype.append=function(e){return this.appendBinary(l(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},p.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),n=a(this._hash),e&&(n=d(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,t){var r,i,s,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(n(this._hash,e),o=0;o<16;o+=1)e[o]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,n(this._hash,e)},p.hash=function(e,t){return p.hashBinary(l(e),t)},p.hashBinary=function(e,t){var n=s(e),r=a(n);return t?d(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var t,r=h(this._buff.buffer,e,!0),s=r.length;for(this._length+=e.byteLength,t=64;t<=s;t+=64)n(this._hash,i(r.subarray(t-64,t)));return this._buff=t-64<s?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r[t]<<(t%4<<3);return this._finish(s,i),n=a(this._hash),e&&(n=d(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=c(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n=o(new Uint8Array(e)),r=a(n);return t?d(r):r},p}))},b17e:function(e,t,n){"use strict";n.r(t),n.d(t,"code1",(function(){return r})),n.d(t,"code2",(function(){return i}));const r="\n/**\n * 文件切片与合并 支持Promise\n * @param {Object } options 配置对象\n * @param {File | string | object | Array} options.file 文件(文件列表) 可选 fileId/file/refs/fileList 任选其一\n * @param {any} options.Vue vue本身也就是this\n * @param {'slice' | 'merge'} options.type 切片还是合并 默认切片 \n * @param {boolean} options.md5 是否需要md5值 默认不需要 true 需要 false 不需要 md5会影响分片速度\n * @param {number} options.chunkSize 切片大小 默认 5M\n * @param {string} options.fileName 合并的文件名称\n * @param {boolean} options.sort 合并进行排序 默认true 合并文件较多建议开启\n * @param {Function} options.success 成功返回 \n * @param {Function} options.fail 错误返回\n * @returns Promise\n * @description 分片返回数据\n * @returns \n * { \n *    code : 200,\n *    list : [\n *      {\n            sort : number, //排序\n            file : file, //分片文件bold\n            filename : string ,//文件名称 name-1 name-2\n            md5 : string //分片文件的md5值\n        }\n *    ], //文件分片的list数据\n *    filename : string, //文件原始名称\n *    file : file, //原始文件 blod数据\n *    md5 : string //原始文件的md5值\n * }\n * @description 合并返回数据\n * @returns\n * {\n *     code : 200,\n *     file : file, //文件 blod数据\n *     filename : string //文件名称\n * }\n * \n * */\n//使用\nimport {fileSliceMerge} from \"@/utils/file-slice-and-merge\"\n// 切片\nfileSliceMerge({\n    file : \"myfile\",\n    Vue : this,\n    chunkSize :1024 * 1024 * 5,\n    md5 : true,\n    success : (res)=>{\n        // 分片文件返回\n    }\n})\n",i='\n// 合并\nfileSliceMerge({\n    file : "myfile1",\n    Vue : this,\n    type : "merge",\n    success : (res)=>{\n        // 合并文件返回\n    }\n})\n'},b62b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page"},[t("div",{staticClass:"tips-box"},[e._v("大文件的切片和分割")]),t("h2",[e._v("切片")]),t("div",{staticClass:"item"},[t("input",{ref:"myfile",attrs:{type:"file"},on:{change:e.changeFile1}}),e.fileInfo.list?t("button",{on:{click:e.downChunkFile}},[e._v("下载分片")]):e._e(),t("div",[t("div",[e._v("文件信息请f12查看")]),t("div",[e._v(e._s(e.fileInfo))])]),t("dzs-code",{attrs:{title:"源代码",value:e.code1}})],1),t("h2",[e._v("合并")]),t("div",{staticClass:"item"},[t("input",{ref:"myfile1",attrs:{type:"file",multiple:""},on:{change:e.changeFile2}}),e.mergeFileInfo.filename?t("button",{on:{click:e.downMergeFile}},[e._v("下载合并")]):e._e(),t("div",[t("div",[e._v("文件信息请f12查看")]),t("div",[e._v(e._s(e.mergeFileInfo))])]),t("dzs-code",{attrs:{title:"源代码",value:e.code2}})],1),t("h2",[e._v("源代码下载/查看")]),e._m(0)]),t("el-backtop",{attrs:{"visibility-height":20}})],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"item"},[t("a",{attrs:{target:"_blank",href:"https://github.com/zsduan/zsduan-summary/blob/master/src/utils/file-slice-and-merge.js"}},[e._v("下载/查看地址")])])}],s=n("b17e"),o=(n("d9e2"),n("14d9"),n("69a0")),f=n.n(o);const a=e=>{let t={file:"",Vue:null,type:"slice",md5:!1,chunkSize:5242880,fileName:"",sort:!0,success:e=>{},fail:e=>{}};return Object.assign(t,e),new Promise((n,r)=>{if(!t)throw r({code:-1,msg:"options不能为空!"}),t.fail({code:-1,msg:"options不能为空"}),new Error("options不能为空");if("object"!==typeof e)throw r({code:-1,msg:"options请传入对象!"}),t.fail({code:-1,msg:"options请传入对象"}),new Error("options请传入对象");if(!t.file)throw r({code:-1,msg:"options.file不能为空!"}),t.fail({code:-1,msg:"options.file不能为空"}),new Error("options.file不能为空");let i=null;if("string"===typeof t.file)if(t.Vue){if(!t.Vue.$refs[t.file])throw r({code:-1,msg:"请确定您存在该ref!"}),t.fail({code:-1,msg:"请确定您存在该ref!"}),new Error("请确定您存在该ref!");i=t.Vue.$refs[t.file].files}else{if(!document.querySelector("#"+t.file))throw r({code:-1,msg:"请确定您存在该id!"}),t.fail({code:-1,msg:"请确定您存在该id!"}),new Error("请确定您存在该id!");i=document.querySelector("#"+t.file).files}switch(t.type){case"slice":i=i[0]||i,l(t,i,n,r);break;case"merge":if(!i.length)throw r({code:-1,msg:"options.file不能为空!"}),e.fail({code:-1,msg:"options.file不能为空!"}),new Error("options.file不能为空!");u(t,i,n,r);break;default:throw r({code:-1,msg:"您输入的类型不正确！"}),e.fail({code:-1,msg:"您输入的类型不正确！"}),new Error("您输入的类型不正确！")}})},l=(e,t,n,r)=>{let i=[];for(let o=0;o<t.size;o+=e.chunkSize){let n=parseInt(o/e.chunkSize)+1,s={sort:n,file:t.slice(o,e.chunkSize*n),filename:`${t.name}-${n}`,md5:""};if(e.md5){let e=new FileReader,t=new f.a.ArrayBuffer;e.readAsArrayBuffer(s.file),e.onload=e=>{t.append(e.target.result),s.md5=t.end()},e.onerror=e=>{throw r({code:-1,msg:"文件读取失败!"}),options.fail({code:-1,msg:"文件读取失败!"}),new Error("文件读取失败!")}}i.push(s)}let s={code:200,list:i,filename:t.name,file:t,md5:""};if(e.md5){let i=new FileReader,o=new f.a.ArrayBuffer;return i.readAsArrayBuffer(t),i.onload=t=>{o.append(t.target.result),s.md5=o.end(),e.success(s),n(s)},void(i.onerror=t=>{throw r({code:-1,msg:"文件读取失败!"}),e.fail({code:-1,msg:"文件读取失败!"}),new Error("文件读取失败!")})}e.success(s),n(s)},u=(e,t,n,r)=>{if(!t.length)throw r({code:-1,msg:"合并文件需要一个数组！"}),e.fail({code:-1,msg:"合并文件需要一个数组！"}),new Error("合并文件需要一个数组！");let i=[];if(e.sort){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].name);e=e.sort(),e.forEach(e=>{for(let n=0;n<t.length;n++)t[n].name==e&&i.push(t[n].slice(0,t[n].size))})}else i=[...t].map(e=>e.slice(0,e.size));const s=e.fileName?e.fileName:t[0].name.replace(/-\d+$/,""),o=new File(i,s);let f={code:200,file:o,filename:s};e.success(f),n(f)};var c=a,h={data(){return{code1:s["code1"],code2:s["code2"],fileInfo:{},mergeFileInfo:{}}},mounted(){},methods:{changeFile1(){c({file:"myfile",Vue:this,chunkSize:5242880,md5:!0,success:e=>{console.log("分片文件返回 ==>",e),this.fileInfo=e}})},downChunkFile(){let e=0;this.fileInfo.list.forEach((t,n)=>{setTimeout(()=>{this.downFile(t.file,this.fileInfo.filename+"-"+t.sort),e++,e==this.fileInfo.list.length&&this.$message.success("下载完毕")},1e3*n)})},changeFile2(){c({file:"myfile1",Vue:this,type:"merge",success:e=>{console.log("合并文件返回 ==>",e),this.mergeFileInfo=e}})},downMergeFile(){this.downFile(this.mergeFileInfo.file,this.mergeFileInfo.filename)},downFile(e,t){const n=document.createElement("a");n.setAttribute("download",t),n.href=URL.createObjectURL(e),n.click()}}},d=h,p=(n("5352"),n("2877")),m=Object(p["a"])(d,r,i,!1,null,"361cb01a",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-45953b2c.ef0caf3d.js.map