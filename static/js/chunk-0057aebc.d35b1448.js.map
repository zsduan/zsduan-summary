{"version":3,"sources":["webpack:///./src/assets/image/2024.png","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue","webpack:///src/views/large-screen-lottery/large-screen-lottery.vue","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?9bf6","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?96d5","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?11f5"],"names":["module","exports","render","_vm","this","_c","_self","staticClass","style","backImg","newIndex","_e","attrs","on","fullScreen","iconSize","isFullScreen","_v","changeUser","model","value","fixedIds","callback","$$v","expression","_l","userList","item","key","id","name","isWinning","_s","title","state","index","icon","background","color","width","liWidth","height","phone","scrollList","winningList","winNum","startLottery","stopLottery","resetLottery","staticRenderFns","props","type","Boolean","default","data","require","fixedList","winnedList","timer","speed","mounted","randomUser","window","addEventListener","e","keyCode","code","beforeDestroy","exitFullscreen","removeEventListener","getLiWidth","methods","arr","i","Math","floor","random","toString","padEnd","obj","push","Object","freeze","setTimeout","requestFullScreen","el","document","cfs","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","exitFullScreen","call","ActiveXObject","wscript","SendKeys","querySelector","rfs","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","filter","user","length","$message","error","setInterval","winIndex","findIndex","win","repeatIndex","scroll","forEach","clearInterval","fix","sort","noLister","li","offsetWidth","slice","component"],"mappings":"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","file":"static/js/chunk-0057aebc.d35b1448.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/2024.f97e1a7b.png\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"large-screen-page\",style:(_vm.backImg)},[(!_vm.newIndex)?_c('dzs-header',{attrs:{\"title\":\"大屏抽奖\"}}):_vm._e(),_c('div',{staticClass:\"full-screen\",on:{\"click\":_vm.fullScreen}},[_c('i',{staticClass:\"el-icon-full-screen\",style:({ 'font-size': _vm.iconSize + 'px' })})]),(!_vm.isFullScreen)?_c('div',{staticClass:\"fixed-user-change\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"内定人员选择\")]),_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeUser},model:{value:(_vm.fixedIds),callback:function ($$v) {_vm.fixedIds=$$v},expression:\"fixedIds\"}},_vm._l((_vm.userList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id,\"disabled\":item.isWinning}})}),1)],1):_vm._e(),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"lottery-box\"},[(_vm.state === 1)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.userList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e(),(_vm.state === 2)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.scrollList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e(),(_vm.state === 3)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.winningList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e()]),_c('div',{staticClass:\"footer-box\"},[(!_vm.isFullScreen)?_c('div',{staticClass:\"footer-top\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"中奖人数设置\")]),_c('el-input-number',{attrs:{\"min\":1,\"max\":50,\"label\":\"描述文字\"},model:{value:(_vm.winNum),callback:function ($$v) {_vm.winNum=$$v},expression:\"winNum\"}})],1):_vm._e(),_c('div',{staticClass:\"footer-bottom\"},[(_vm.state !== 2)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击空格/按钮开始\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.startLottery}},[_vm._v(\"开始抽奖\")])],1):_vm._e(),(_vm.state === 2)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击空格/按钮结束\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.stopLottery}},[_vm._v(\"停止抽奖\")])],1):_vm._e(),(_vm.state !== 2)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.resetLottery}},[_vm._v(\"重置\")]):_vm._e()],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"large-screen-page\" :style=\"backImg\">\r\n        <dzs-header title=\"大屏抽奖\" v-if=\"!newIndex\"></dzs-header>\r\n        <div class=\"full-screen\" @click=\"fullScreen\">\r\n            <i class=\"el-icon-full-screen\" :style=\"{ 'font-size': iconSize + 'px' }\"></i>\r\n        </div>\r\n        <div class=\"fixed-user-change\" v-if=\"!isFullScreen\">\r\n            <label class=\"label\">内定人员选择</label>\r\n            <el-select v-model=\"fixedIds\" filterable multiple collapse-tags placeholder=\"请选择\" @change=\"changeUser\">\r\n                <el-option v-for=\"item in userList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"\r\n                    :disabled=\"item.isWinning\">\r\n                </el-option>\r\n            </el-select>\r\n        </div>\r\n        <div class=\"title\">{{ title }}</div>\r\n        <div class=\"lottery-box\">\r\n            <!-- 签到状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 1\">\r\n                <li v-for=\"(item, index) in userList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n            <!-- 抽奖状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 2\">\r\n                <li v-for=\"(item, index) in scrollList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n            <!-- 结束状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 3\">\r\n                <li v-for=\"(item, index) in winningList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"footer-box\">\r\n            <div class=\"footer-top\" v-if=\"!isFullScreen\">\r\n                <label class=\"label\">中奖人数设置</label>\r\n                <el-input-number v-model=\"winNum\" :min=\"1\" :max=\"50\" label=\"描述文字\"></el-input-number>\r\n            </div>\r\n            <div class=\"footer-bottom\">\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"点击空格/按钮开始\" placement=\"top\" v-if=\"state !== 2\">\r\n                    <el-button type=\"primary\" @click=\"startLottery\" >开始抽奖</el-button>\r\n                </el-tooltip>\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"点击空格/按钮结束\" placement=\"top\" v-if=\"state === 2\">\r\n                    <el-button type=\"primary\" @click=\"stopLottery\" >停止抽奖</el-button>\r\n                </el-tooltip>\r\n                <el-button type=\"danger\" @click=\"resetLottery\" v-if=\"state !== 2\">重置</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"large-screen-lottery\",\r\n    props: {\r\n        newIndex: {\r\n            type: Boolean,\r\n            default: () => {\r\n                return false\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            backImg: {\r\n                background: `url(${require(\"@/assets/image/2024.png\")}) no-repeat`,\r\n                'background-size': '100% 100%'\r\n            },\r\n            /**用户列表*/\r\n            userList: [],\r\n            /**内定名额列表*/\r\n            fixedList: [],\r\n            fixedIds: [],\r\n            /**中奖名额*/\r\n            winningList: [],\r\n            /**已经中奖名额*/\r\n            winnedList: [],\r\n            /**滚动列表*/\r\n            scrollList: [],\r\n            /**中奖数量*/\r\n            winNum: 5,\r\n            /**图标大小*/\r\n            iconSize: 30,\r\n            /**是否全屏*/\r\n            isFullScreen: false,\r\n            /**标题*/\r\n            title: \"XX抽奖\",\r\n            /**当前状态*/\r\n            state: 1, // 1:未开始 2:进行中 3:已结束 \r\n            /**li的宽度*/\r\n            liWidth: 0,\r\n            /**定时器*/\r\n            timer: null,\r\n            /**滚动速度 ms*/\r\n            speed: 200\r\n        }\r\n    },\r\n    mounted() {\r\n        this.randomUser();\r\n        // 监听空格键\r\n        window.addEventListener('keydown', (e) => {\r\n            if (e.keyCode === 32 || e.code === \"Space\") {\r\n                if (this.state === 1 || this.state === 3) {\r\n                    this.startLottery();\r\n                } else if (this.state === 2) {\r\n                    this.stopLottery();\r\n                }\r\n            }\r\n        });\r\n    },\r\n    beforeDestroy() {\r\n        this.exitFullscreen();\r\n        window.removeEventListener('resize', this.getLiWidth);\r\n        window.removeEventListener('keydown', () => { });\r\n    },\r\n    methods: {\r\n        /**随机生成 1000 个名额*/\r\n        randomUser() {\r\n            let arr = [];\r\n            for (let i = 0; i < 1000; i++) {\r\n                // 随机生成 16进制颜色\r\n                let color = '#' + Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');\r\n                let obj = {\r\n                    id: i + 1,\r\n                    name: `用户${i + 1}`,\r\n                    phone: `138${Math.floor(Math.random() * 100000000)}`,\r\n                    isWinning: false,\r\n                    icon: \"\",\r\n                    color: color\r\n                }\r\n                arr.push(obj);\r\n            }\r\n            this.userList = Object.freeze(arr);\r\n            setTimeout(() => {\r\n                this.getLiWidth();\r\n            }, 200);\r\n        },\r\n        /**全屏*/\r\n        fullScreen() {\r\n            this.isFullScreen = !this.isFullScreen;\r\n            if (this.isFullScreen) {\r\n                this.iconSize = 20;\r\n                this.requestFullScreen();\r\n            } else {\r\n                this.iconSize = 30;\r\n                this.exitFullscreen();\r\n            }\r\n        },\r\n        /**退出全屏*/\r\n        exitFullscreen() {\r\n            let el = document;\r\n            let cfs = el.cancelFullScreen || el.webkitCancelFullScreen || el.mozCancelFullScreen || el.exitFullScreen;\r\n            if (typeof cfs != \"undefined\" && cfs) {\r\n                cfs.call(el);\r\n            } else if (typeof window.ActiveXObject != \"undefined\") {\r\n                let wscript = new ActiveXObject(\"WScript.Shell\");\r\n                if (wscript != null) {\r\n                    wscript.SendKeys(\"{F11}\");\r\n                }\r\n            }\r\n            setTimeout(() => {\r\n                this.getLiWidth(true);\r\n            }, 200);\r\n        },\r\n        /**请求全屏*/\r\n        requestFullScreen() {\r\n            let el = document.querySelector('.large-screen-page');\r\n            let rfs = el.requestFullScreen || el.webkitRequestFullScreen || el.mozRequestFullScreen || el.msRequestFullScreen;\r\n            if (typeof rfs != \"undefined\" && rfs) {\r\n                rfs.call(el);\r\n            } else if (typeof window.ActiveXObject != \"undefined\") {\r\n                let wscript = new ActiveXObject(\"WScript.Shell\");\r\n                if (wscript != null) {\r\n                    wscript.SendKeys(\"{F11}\");\r\n                }\r\n            }\r\n            setTimeout(() => {\r\n                this.getLiWidth(true);\r\n            }, 200);\r\n        },\r\n        /**开始抽奖*/\r\n        startLottery() {\r\n            // 根据滚动人数随机推入人员信息\r\n            let userList = this.userList.filter(user => user.isWinning === false);\r\n            if (this.winNum > userList.length) {\r\n                this.$message.error(`中奖人数不能超过总人数`);\r\n                return;\r\n            }\r\n            this.state = 2;\r\n            this.timer = setInterval(() => {\r\n                let scrollList = [];\r\n                for (let i = 0; i < this.winNum; i++) {\r\n                    let index = Math.floor(Math.random() * this.userList.length);\r\n                    let item = this.userList[index];\r\n                    let winIndex = this.winnedList.findIndex(win => win.id === item.id);\r\n                    let repeatIndex = scrollList.findIndex(scroll => scroll.id === item.id);\r\n                    if (winIndex == -1 && repeatIndex == -1) {\r\n                        scrollList.push(item);\r\n                    } else {\r\n                        i--;\r\n                    }\r\n                }\r\n                this.scrollList = scrollList;\r\n            }, this.speed);\r\n            this.getLiWidth(true);\r\n\r\n        },\r\n        /**重置*/\r\n        resetLottery() {\r\n            this.winnedList = [];\r\n            this.state = 1;\r\n            this.fixedList = [];\r\n            this.winningList = [];\r\n            this.userList.forEach(user => user.isWinning = false);\r\n        },\r\n        /**停止抽奖*/\r\n        stopLottery() {\r\n            clearInterval(this.timer);\r\n            this.timer = null;\r\n            this.winningList = [];\r\n            if (this.fixedList.length > 0) {\r\n                this.winningList = this.userList.filter(user => this.fixedList.findIndex(fix => fix.id === user.id) !== -1);\r\n            }\r\n            // 剩余名额 在滚动中选择\r\n            let winNum = this.userList.length < this.winNum ? this.userList.length : this.winNum;\r\n            winNum = winNum - this.winningList.length;\r\n            for (let i = 0; i < winNum; i++) {\r\n                let index = Math.floor(Math.random() * this.scrollList.length);\r\n                let item = this.scrollList[index];\r\n                let winIndex = this.winningList.findIndex(win => win.id === item.id);\r\n                if (winIndex == -1) {\r\n                    this.winningList.push(item);\r\n                } else {\r\n                    i--;\r\n                }\r\n            }\r\n            this.winningList.forEach(win => {\r\n                let index = this.userList.findIndex(user => user.id === win.id);\r\n                this.userList[index].isWinning = true;\r\n                this.winnedList.push(win);\r\n            });\r\n\r\n            // 对中奖名单 随机排序\r\n            this.winningList.sort(() => Math.random() - 0.5);\r\n            this.state = 3;\r\n            this.fixedList = [];\r\n            this.fixedIds = [];\r\n            this.scrollList = [];\r\n        },\r\n        /**\r\n         * 动态获取li的宽度\r\n         * @param {Boolean} noLister 是否监听\r\n         * */\r\n        getLiWidth(noLister = false) {\r\n            let li = document.querySelector('.public-list li');\r\n            this.liWidth = (li.offsetWidth - 100) + 'px';\r\n            if(noLister) return ;\r\n            window.addEventListener('resize', () => {\r\n                if (this.isFullScreen) {\r\n                    this.liWidth = (li.offsetWidth - 160) + 'px';\r\n                    return;\r\n                }\r\n                this.liWidth = (li.offsetWidth - 100) + 'px';\r\n            });\r\n        },\r\n        /**内定人员选择*/\r\n        changeUser() {\r\n            if (this.fixedIds.length > this.winNum) {\r\n                this.$message.error(`内定人员不能超过中奖人数`);\r\n                this.fixedIds = this.fixedIds.slice(0, this.winNum);\r\n                return;\r\n            }\r\n            this.fixedList = this.userList.filter(user => this.fixedIds.findIndex(fix => fix === user.id) !== -1);\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.large-screen-page {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-size: 100% 100%;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n\r\n    .full-screen {\r\n        position: absolute;\r\n        right: 20px;\r\n        top: 20px;\r\n        cursor: pointer;\r\n        z-index: 999;\r\n\r\n        .el-icon-full-screen {\r\n            color: var(--ThemeColor);\r\n        }\r\n    }\r\n\r\n    .title {\r\n        font-size: 50px;\r\n        text-align: center;\r\n        padding-top: 5%;\r\n    }\r\n\r\n    .fixed-user-change {\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 60px;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .label {\r\n            font-size: 20px;\r\n            margin-right: 10px;\r\n        }\r\n    }\r\n\r\n    .lottery-box {\r\n        width: 65%;\r\n        height: 60%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        border-radius: 10px;\r\n        background: rgba(255, 255, 255, 0.5);\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.1);\r\n        overflow-y: auto;\r\n\r\n        // 隐藏滚动条\r\n        &::-webkit-scrollbar {\r\n            display: none;\r\n        }\r\n\r\n        .public-list {\r\n            display: flex;\r\n            align-items: center;\r\n            flex-wrap: wrap;\r\n            width: 100%;\r\n            justify-content: center;\r\n\r\n            li {\r\n                width: 25%;\r\n                text-align: center;\r\n                padding: 5px;\r\n\r\n                .icon {\r\n                    margin: 0 auto;\r\n                    border-radius: 50%;\r\n                    overflow: hidden;\r\n                    margin-bottom: 5px;\r\n\r\n                    .image {\r\n                        width: 100%;\r\n                        height: 100%;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .footer-box {\r\n        position: absolute;\r\n        bottom: 40px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n\r\n        .footer-top {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            margin-bottom: 20px;\r\n\r\n            .label {\r\n                font-size: 20px;\r\n                margin-right: 10px;\r\n            }\r\n        }\r\n\r\n        .footer-bottom {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./large-screen-lottery.vue?vue&type=template&id=7d88f9e7&scoped=true&\"\nimport script from \"./large-screen-lottery.vue?vue&type=script&lang=js&\"\nexport * from \"./large-screen-lottery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./large-screen-lottery.vue?vue&type=style&index=0&id=7d88f9e7&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d88f9e7\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=style&index=0&id=7d88f9e7&prod&lang=less&scoped=true&\""],"sourceRoot":""}