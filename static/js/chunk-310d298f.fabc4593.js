(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-310d298f"],{3809:function(e,t,l){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("el-upload",{class:{"upload-dzs":!0,"upload-dzs-phone":e.isPhone},attrs:{drag:"",action:e.action,multiple:e.multiple,"file-list":e.fileList,limit:e.limit,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"auto-upload":e.autoUpload,"on-change":e.changeFile,"show-file-list":!0}},[t("i",{staticClass:"el-icon-upload"}),e.isPhone?t("div",{staticClass:"el-upload__text"},[t("em",[e._v("点击上传文件")])]):t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("div",[e._v("只能上传不超过 "+e._s(e.maxSize/1024/1024)+"M 的"+e._s(e.fileType.join("、"))+"文件")]),e.limit>1?t("div",[e._v("最多上传 "+e._s(e.limit)+" 个文件")]):e._e()])])],1)},s=[],a=(l("14d9"),{model:{prop:"value",event:"update:value"},props:{action:{type:String,default:()=>"#"},limit:{type:Number,default:()=>1},maxSize:{type:Number,default:()=>5242880},fileType:{type:Array,default:()=>["doc","docx","ppt","pptx","zip","rar","pdf","xls","xlsx","txt","jpg","png","jpeg"]},value:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:()=>!0},isPhone:{type:Boolean,default:()=>!1}},data(){return{multiple:!1,fileList:[]}},watch:{limit:{handler(e){this.multiple=1!=e},immediate:!0},value:{handler(e){e.length>0&&(this.fileList=e.map(e=>({name:e.name,url:e.url,uid:e.uid,status:"success"})))},immediate:!0}},methods:{beforeUpload(e){let t=e.name.split(".")[1];return-1==this.fileType.indexOf(t)?(this.$message.error("上传文件格式不正确"),!1):!(e.size>this.maxSize)||(this.$message.error(`上传文件大小不能超过 ${this.maxSize/1024/1024}MB!`),!1)},handleSuccess(e,t){let l={name:t.name,path:e.path?e.path:"",uploadUrl:e.url?e.url:"",uid:t.uid,type:t.type,formItem:"upload-file",status:"success"};this.fileList.push(l),this.$emit("update:value",this.fileList),this.$emit("change",this.fileList)},changeFile(e){if(!this.autoUpload){let t={name:e.name,path:e.url,uploadUrl:e.url,uid:e.uid,type:e.type,status:"success",fromItem:"upload-file",file:e.raw};this.fileList.push(t),this.$emit("update:value",this.fileList),this.$emit("change",this.fileList)}},handleExceed(e,t){this.$message.warning(`当前限制选择 ${this.limit} 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)}}}),o=a,r=(l("b298"),l("2877")),n=Object(r["a"])(o,i,s,!1,null,"2e9b139b",null);t["a"]=n.exports},"6fce":function(e,t,l){},"756d":function(e,t,l){"use strict";l("fb10")},"9ef1":function(e,t,l){"use strict";l("6fce")},a362:function(e,t,l){},ac93:function(e,t,l){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-box",attrs:{id:e.fromId}},[t("el-form",e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dzsForm",class:{ruleForm:!0,noScroll:e.loading,"phone-form":e.formBoxWidth<=768,"form-box-scroll":e.isScroll},style:{height:e.isScroll?e.height:"100%"},attrs:{"element-loading-text":e.loadingText,model:e.fromModel,rules:e.fromRules,"label-position":e.labelPosition}},"el-form",{...e.formProps},!1),[t("el-row",{attrs:{gutter:e.gutter}},e._l(e.formItem,(function(l,i){return t("div",{key:i},[l.isHidden?e._e():t("el-col",{attrs:{span:l.span?l.span:24}},[l.isSlot?[e._t(l.key)]:e._e(),l.isSlot?e._e():[t("el-form-item",{attrs:{label:l.label,prop:l.key}},[t("div",{staticClass:"dzs-form-item"},[e._t(l.key+"Before"),l.props&&l.props.isSlot?[e._t(""+l.key)]:e._e(),"input"==l.type?[t("el-input",e._b({attrs:{value:e.getFromModelValue(l.key),placeholder:e.getPlaceholder(l)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-input",{...l.props},!1),[l.slots?t("template",{slot:l.slots.name},[e._v(" "+e._s(l.slots.text)+" ")]):e._e()],2)]:e._e(),"number"==l.type?[t("el-input-number",e._b({attrs:{value:e.getFromModelValue(l.key),placeholder:e.getPlaceholder(l)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-input-number",{...l.props},!1))]:e._e(),"select"==l.type?[t("el-select",e._b({attrs:{value:e.getFromModelValue(l.key),placeholder:e.getPlaceholder(l,"select")},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-select",{...l.props},!1),e._l(l.children,(function(e,l){return t("el-option",{key:e.value+l.toString(),staticStyle:{padding:"0 6px"},attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"date"==l.type?[t("el-date-picker",e._b({attrs:{value:e.getFromModelValue(l.key),placeholder:e.getPlaceholder(l,"select")},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-date-picker",{...l.props},!1))]:e._e(),"time"==l.type?[t("el-time-picker",e._b({attrs:{value:e.getFromModelValue(l.key),placeholder:e.getPlaceholder(l,"select")},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-time-picker",{...l.props},!1))]:e._e(),"color"==l.type?[t("el-color-picker",e._b({attrs:{value:e.getFromModelValue(l.key)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-color-picker",{...l.props},!1))]:e._e(),"switch"==l.type?[t("el-switch",e._b({attrs:{value:e.getFromModelValue(l.key)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-switch",{...l.props},!1))]:e._e(),"checkbox"==l.type?[t("el-checkbox-group",e._b({attrs:{value:e.getFromModelValue(l.key)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-checkbox-group",{...l.props},!1),e._l(l.children,(function(l,i){return t("el-checkbox",e._b({key:l.value+i,staticClass:"items",attrs:{label:l.value}},"el-checkbox",{...l.props},!1),[e._v(" "+e._s(l.label)+" ")])})),1)]:e._e(),"radio"==l.type?[t("el-radio-group",e._b({attrs:{value:e.getFromModelValue(l.key)},on:{input:function(t){return e.changeVaule(t,l.key)}}},"el-radio-group",{...l.props},!1),e._l(l.children,(function(l,i){return t("el-radio",e._b({key:l.value+i,staticClass:"items",attrs:{label:l.value}},"el-radio",{...l.props},!1),[e._v(" "+e._s(l.label)+" ")])})),1)]:e._e(),"uploadImg"==l.type?[t("dzs-upload-img",e._b({attrs:{value:e.getFromModelValue(l.key)},on:{change:function(t){return e.changeVaule(t,l.key)}}},"dzs-upload-img",{...l.props},!1))]:e._e(),"uploadFile"==l.type?[t("dzs-upload-file",e._b({attrs:{isPhone:e.formBoxWidth<=768,value:e.getFromModelValue(l.key)},on:{change:function(t){return e.changeVaule(t,l.key)}}},"dzs-upload-file",{...l.props},!1))]:e._e(),"editor"==l.type?[t("dzs-editors",e._b({attrs:{toolbar:e.toolbar,show_save:!1,value:e.getFromModelValue(l.key)},on:{save:function(t){return e.changeVaule(t,l.key)}}},"dzs-editors",{...l.props},!1))]:e._e(),e._t(l.key+"After")],2),e.getTips(l)&&"divider"!=l.type?t("div",{staticClass:"from-item-tips"},[e._v(" "+e._s(e.getTips(l))+" ")]):e._e()]),"divider"==l.type?[t("el-divider",e._b({},"el-divider",{...l.props},!1),[l.props&&l.props.tips?t("span",[e._v(e._s(l.props.tips))]):e._e(),l.props&&l.props.icon?t("i",{class:l.props.icon}):e._e()])]:e._e()]],2)],1)})),0)],1),e.showBtn?t("div",{class:["form-sbumit-box",e.buttonFlex]},[t("el-button",{staticClass:"btn cancel",attrs:{type:"info"},on:{click:function(t){return t.stopPropagation(),e.cancel.apply(null,arguments)}}},[e._v(e._s(e.cancelText))]),e._t("footerBtn"),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit("dzsForm")}}},[e._v(e._s(e.submitText))])],2):e._e()],1)},s=[];l("d9e2");const a={shortcuts:[{text:"最近一周",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-6048e5),e.$emit("pick",[l,t])}},{text:"最近一个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-2592e6),e.$emit("pick",[l,t])}},{text:"最近三个月",onClick(e){const t=new Date,l=new Date;l.setTime(l.getTime()-7776e6),e.$emit("pick",[l,t])}}]};var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-img-box"},[e.fileList.length?t("div",{staticClass:"show-img-box",style:e.imgStyle},e._l(e.fileList,(function(l,i){return t("div",{key:i},[t("img",{staticClass:"el-upload-list__item-thumbnail",style:e.imgStyle,attrs:{src:l.url,alt:""}}),t("div",{staticClass:"el-upload-list__item-actions",style:e.imgStyle},[t("div",{staticClass:"el-upload-actions"},[t("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.handlePictureCardPreview(l)}}}),t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.handleRemove(i)}}})])])])})),0):e._e(),t("div",{style:e.imgStyle},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upFile,"show-file-list":!1,"list-type":"picture-card","file-list":e.fileList,limit:e.limit,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"auto-upload":e.autoUpload,"on-change":e.changeFile}},[t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},r=[],n=(l("14d9"),{name:"dzs-upload-img",model:{prop:"value",event:"update:value"},props:{upFile:{type:String,default:()=>"#"},value:{type:Array|String,default:()=>[]},imgStyle:{type:String,default:()=>"width:80px;height:80px;"},limit:{type:Number,default:()=>1},maxSize:{type:Number,default:()=>3},imgType:{type:String,default:()=>"image/jpeg,image/png,image/gif"},autoUpload:{type:Boolean,default:()=>!0}},data(){return{fileList:[],dialogImageUrl:"",dialogVisible:!1}},watch:{value:{handler(e){this.fileList="string"==typeof e?e?{uid:(new Date).getTime(),url:e,status:"success",fromItem:"upload-img"}:[]:e},deep:!0,immediate:!0}},methods:{beforeUpload(e){let t=this.imgType.split(","),l=t.indexOf(e.type);const i=e.size/1024/1024<this.maxSize;return-1==l&&this.$message.error("请上传正确的图片格式"),i||this.$message.error(`上传图片大小不能超过 ${this.maxSize}MB!`),-1!=l&&i},handleSuccess(e,t){let l={name:t.name,path:e.path?e.path:"",uploadUrl:e.url?e.url:"",uid:t.uid,url:t.url,status:"success",fromItem:"upload-img",data:e,file:t};this.fileList.push(l),this.$emit("update:value",this.fileList),this.$emit("upload-success",l),this.$emit("change",this.fileList)},changeFile(e){if(!this.autoUpload){let t={name:e.name,path:e.url,uploadUrl:e.url,uid:e.uid,url:e.url,status:"success",fromItem:"upload-img",data:e.raw,file:e.raw};this.fileList.push(t),this.$emit("update:value",this.fileList),this.$emit("upload-success",t),this.$emit("change",this.fileList)}},handleExceed(e,t){this.$message.warning(`当前上传图片数量已达上限${this.limit}张`)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e){this.fileList.splice(e,1),this.$emit("change",this.fileList),this.$emit("update:value",this.fileList),this.$emit("upload-remove",this.fileList)}}}),u=n,p=(l("9ef1"),l("2877")),d=Object(p["a"])(u,o,r,!1,null,"96c2739c",null),m=d.exports,c=l("d3a1"),h=l("3809");const f=e=>{if("object"!==typeof e||null===e)return e;let t=Array.isArray(e)?[]:{};for(let l in e)e.hasOwnProperty(l)&&(t[l]=f(e[l]));return t};var g=f,y={name:"From",components:{dzsUploadImg:m,dzsEditors:c["a"],dzsUploadFile:h["a"]},model:{prop:"value",event:"update:value"},props:{options:{type:Object,default:()=>({})},submitText:{type:String,default:()=>"提交"},cancelText:{type:String,default:()=>"取消"},showBtn:{type:Boolean,default:()=>!0},value:{type:Object,default:()=>({})},antiShakeTime:{type:Number,default:()=>1e3},loadingText:{type:String,default:()=>""},loading:{type:Boolean,default:()=>!1},isFormData:{type:Boolean,default:()=>!1},gutter:{type:Number,default:()=>10},isScroll:{type:Boolean,default:()=>!0},height:{type:String,default:()=>"100%"},buttonFlex:{type:String,default:()=>"right"}},data(){return{fromModel:{},fromRules:{},formItem:[],formProps:{},pickerOptions:a,formBoxWidth:0,labelPosition:"left",timer:null,toolbar:[],fromId:"dzsForm"+(new Date).getTime()}},watch:{options:{handler(e,t){e.formItem&&e.formItem.length&&this.initModel(e)},deep:!0,immediate:!0},value:{handler(e,t){e&&this.setFormData(e)},deep:!0,immediate:!0}},created(){},mounted(){this.listenFormBoxWidth()},methods:{getPlaceholder(e,t="input"){let l="select"==t?"请选择":"请输入",i=e.props&&e.props.placeholder?e.props.placeholder:l+e.label;return i},getTips(e){return e.props&&e.props.tips?e.props.tips:""},changeVaule(e,t){let l=t.split("."),i=this.fromModel;for(let s=0;s<l.length-1;s++)i=i[l[s]];i[l[l.length-1]]=e,this.$emit("update:value",this.fromModel),this.$emit("change",{value:e,key:t})},getFromModelValue(e){let t=e.split("."),l=this.fromModel;for(let i=0;i<t.length;i++)l=l[t[i]];return l},submit(e="dzsForm"){if(!this.timer)return this.timer=setTimeout(()=>{clearTimeout(this.timer),this.timer=null},this.antiShakeTime),new Promise((t,l)=>{this.$refs[e].validate(e=>{if(!e)return this.$message.error("请填写完整信息"),void l({code:-200,message:"请填写完整的信息"});if(this.isFormData)return void this.sendFormData(t);let i={};this.formItem.forEach(e=>{let t=e.key.split("."),l=this.fromModel;for(let i=0;i<t.length;i++)l=l[t[i]];switch(e.type){case"uploadImg":let t=l;i[e.key]=t&&t.length>0?t.map(e=>e.uploadUrl).join(","):"";break;case"switch":i[e.key]=l||!1;break;default:i[e.key]=l;break}e.isNull&&delete i[e.key],i=this.transformKeysToNestedObject(i)}),this.$emit("onSubmit",i),this.$emit("update:value",i),t(i)})});this.$message({message:`请勿重复提交,${this.antiShakeTime/1e3} 秒后再试`,type:"warning"})},sendFormData(e,t){let l=new FormData;this.formItem.forEach(e=>{if(e.isNull)return;let i=e.key.split("."),s=this.fromModel;for(let t=0;t<i.length;t++)s=s[i[t]];let a=null;switch(e.type){case"uploadImg":let i=s;if(i&&i.length>1)throw t({code:-200,message:"formData 上传图片只能上传一张图片 请检查"}),new Error("formData 上传图片只能上传一张图片 请检查");i&&i.length>0&&(a=i[0].file),!a&&i&&(a=i.file||null),i&&i.length>0&&l.append(e.key,a);break;case"uploadFile":let o=s;if(o&&o.length>1)throw t({code:-200,message:"formData 上传图片只能上传一个文件 请检查"}),new Error("formData 上传图片只能上传一个文件 请检查");o&&o.length>0&&(a=o[0].file),!a&&o&&(a=o.file||null),o&&o.length>0&&l.append(e.key,a);break;case"switch":l.append(e.key,s?"true":"false");break;case"checkbox":l.append(e.key,s.join(","));break;case"divider":l.delete(e.key);break;default:l.append(e.key,s);break}}),this.$emit("onSubmit",l),e(l)},cancel(){this.clearForm(),this.$emit("onCancel")},initModel(e){if(this.labelPosition=this.formBoxWidth<=768?"top":"left",this.options&&this.options.formProps){let e=this.options.formProps["label-position"]||this.options.formProps["labelPosition"];e&&(this.labelPosition=e)}this.formProps=e.formProps||{},this.formItem=g(e.formItem);let t={};this.formItem.forEach(e=>{e.span=this.formBoxWidth<=768?24:e.span,this.value[e.key]&&(e.defaultValue=this.value[e.key]),"checkbox"!==e.type&&"uploadImg"!==e.type&&"uploadFile"!=e.type||e.defaultValue||(e.defaultValue=[]),"switch"!=e.type||e.defaultValue||(e.defaultValue=!1),"input"==e.type&&e.defaultValue&&(e.defaultValue=e.defaultValue.toString()),e.props||(e.props={}),"select"==e.type&&e.props.multiple&&!e.defaultValue&&(e.defaultValue=[]),this.fromRules[e.key]=e.rules||[],e.defaultValue&&(t[e.key]=e.defaultValue),"switch"!=e.type?t[e.key]=t[e.key]?t[e.key]:e.defaultValue||"":t[e.key]=t[e.key]?t[e.key]:e.defaultValue}),t=this.transformKeysToNestedObject(t),this.fromModel={...g(this.fromModel),...g(t)}},transformKeysToNestedObject(e){let t={};const l=Object.keys(e);for(let i=0;i<l.length;i++){const s=l[i].split("."),a=e[l[i]];let o=t;for(let e=0;e<s.length-1;e++){const t=s[e];o=o[t]||(o[t]={})}o[s[s.length-1]]=a}return t},clearForm(){this.$refs["dzsForm"].resetFields(),this.initModel(this.options),this.$emit("update:value",this.fromModel)},getFormMethod(){return this.$refs["dzsForm"]},setFormData(e){"{}"!=JSON.stringify(e)&&e&&(this.fromModel={...g(e)},setTimeout(()=>{this.fromModel={...g(e)}},100))},listenFormBoxWidth(){let e=["undo redo save | importword autosave fullscreen print help"],t=["undo redo save| formatselect | fontsizeselect | fontselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | lists image searchreplace | bullist numlist outdent indent |  media table insertdatetime | removeformat hr | importword autosave fullscreen print help"];const l=new ResizeObserver(l=>{for(let i of l){const{width:l}=i.contentRect;if(this.formBoxWidth=l,this.labelPosition=l<=768?"top":"left",this.options&&this.options.formProps){let e=this.options.formProps["label-position"]||this.options.formProps["labelPosition"];e&&(this.labelPosition=e)}if(this.toolbar=l<=768?e:t,this.formItem=g(this.options.formItem),!this.formItem)return;this.formItem.forEach(e=>{e.span=l<=768?24:e.span})}});l.observe(document.querySelector("#"+this.fromId))}}},b=y,v=(l("756d"),Object(p["a"])(b,i,s,!1,null,"b186ba9e",null));t["a"]=v.exports},b298:function(e,t,l){"use strict";l("a362")},fb10:function(e,t,l){}}]);
//# sourceMappingURL=chunk-310d298f.fabc4593.js.map