(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02ccb01d"],{"07ab":function(t,i,e){t.exports=e.p+"static/img/2024.f97e1a7b.png"},"55e5":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"large-screen-page",style:t.backImg},[i("div",{staticClass:"full-screen",on:{click:t.fullScreen}},[i("i",{staticClass:"el-icon-full-screen",style:{"font-size":t.iconSize+"px"}})]),t.isFullScreen?t._e():i("div",{staticClass:"fixed-user-change"},[i("label",{staticClass:"label"},[t._v("内定人员选择")]),i("el-select",{attrs:{filterable:"",multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.changeUser},model:{value:t.fixedIds,callback:function(i){t.fixedIds=i},expression:"fixedIds"}},t._l(t.userList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.isWinning}})})),1)],1),i("div",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{staticClass:"lottery-box"},[1===t.state?i("ul",{staticClass:"public-list"},t._l(t.userList,(function(e,s){return i("li",{key:s},[e.icon?i("div",{staticClass:"icon"},[i("img",{staticClass:"image",attrs:{src:e.icon,alt:""}})]):i("div",{staticClass:"icon",style:{background:e.color,width:t.liWidth,height:t.liWidth}}),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"phone"},[t._v(t._s(e.phone))])])})),0):t._e(),2===t.state?i("ul",{staticClass:"public-list"},t._l(t.scrollList,(function(e,s){return i("li",{key:s},[e.icon?i("div",{staticClass:"icon"},[i("img",{staticClass:"image",attrs:{src:e.icon,alt:""}})]):i("div",{staticClass:"icon",style:{background:e.color,width:t.liWidth,height:t.liWidth}}),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"phone"},[t._v(t._s(e.phone))])])})),0):t._e(),3===t.state?i("ul",{staticClass:"public-list"},t._l(t.winningList,(function(e,s){return i("li",{key:s},[e.icon?i("div",{staticClass:"icon"},[i("img",{staticClass:"image",attrs:{src:e.icon,alt:""}})]):i("div",{staticClass:"icon",style:{background:e.color,width:t.liWidth,height:t.liWidth}}),i("div",{staticClass:"name"},[t._v(t._s(e.name))]),i("div",{staticClass:"phone"},[t._v(t._s(e.phone))])])})),0):t._e()]),i("div",{staticClass:"footer-box"},[t.isFullScreen?t._e():i("div",{staticClass:"footer-top"},[i("label",{staticClass:"label"},[t._v("中奖人数设置")]),i("el-input-number",{attrs:{min:1,max:50,label:"描述文字"},model:{value:t.winNum,callback:function(i){t.winNum=i},expression:"winNum"}})],1),i("div",{staticClass:"footer-bottom"},[2!==t.state?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击空格/按钮开始",placement:"top"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.startLottery}},[t._v("开始抽奖")])],1):t._e(),2===t.state?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击空格/按钮结束",placement:"top"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.stopLottery}},[t._v("停止抽奖")])],1):t._e(),2!==t.state?i("el-button",{attrs:{type:"danger"},on:{click:t.resetLottery}},[t._v("重置")]):t._e()],1)])])},n=[],l=(e("14d9"),{name:"large-screen-lottery",data(){return{backImg:{background:`url(${e("07ab")}) no-repeat`,"background-size":"100% 100%"},userList:[],fixedList:[],fixedIds:[],winningList:[],winnedList:[],scrollList:[],winNum:5,iconSize:30,isFullScreen:!1,title:"XX抽奖",state:1,liWidth:0,timer:null,speed:200}},mounted(){this.randomUser(),window.addEventListener("keydown",t=>{32!==t.keyCode&&"Space"!==t.code||(1===this.state||3===this.state?this.startLottery():2===this.state&&this.stopLottery())})},beforeDestroy(){this.exitFullscreen(),window.removeEventListener("resize",this.getLiWidth),window.removeEventListener("keydown",()=>{})},methods:{randomUser(){let t=[];for(let i=0;i<1e3;i++){let e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0"),s={id:i+1,name:"用户"+(i+1),phone:"138"+Math.floor(1e8*Math.random()),isWinning:!1,icon:"",color:e};t.push(s)}this.userList=Object.freeze(t),setTimeout(()=>{this.getLiWidth()},200)},fullScreen(){this.isFullScreen=!this.isFullScreen,this.isFullScreen?(this.iconSize=20,this.requestFullScreen()):(this.iconSize=30,this.exitFullscreen())},exitFullscreen(){let t=document,i=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;if("undefined"!=typeof i&&i)i.call(t);else if("undefined"!=typeof window.ActiveXObject){let t=new ActiveXObject("WScript.Shell");null!=t&&t.SendKeys("{F11}")}setTimeout(()=>{this.getLiWidth(!0)},200)},requestFullScreen(){let t=document.querySelector(".large-screen-page"),i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if("undefined"!=typeof i&&i)i.call(t);else if("undefined"!=typeof window.ActiveXObject){let t=new ActiveXObject("WScript.Shell");null!=t&&t.SendKeys("{F11}")}setTimeout(()=>{this.getLiWidth(!0)},200)},startLottery(){let t=this.userList.filter(t=>!1===t.isWinning);this.winNum>t.length?this.$message.error("中奖人数不能超过总人数"):(this.state=2,this.timer=setInterval(()=>{let t=[];for(let i=0;i<this.winNum;i++){let e=Math.floor(Math.random()*this.userList.length),s=this.userList[e],n=this.winnedList.findIndex(t=>t.id===s.id),l=t.findIndex(t=>t.id===s.id);-1==n&&-1==l?t.push(s):i--}this.scrollList=t},this.speed),this.getLiWidth(!0))},resetLottery(){this.winnedList=[],this.state=1,this.fixedList=[],this.winningList=[],this.userList.forEach(t=>t.isWinning=!1)},stopLottery(){clearInterval(this.timer),this.timer=null,this.winningList=[],this.fixedList.length>0&&(this.winningList=this.userList.filter(t=>-1!==this.fixedList.findIndex(i=>i.id===t.id)));let t=this.userList.length<this.winNum?this.userList.length:this.winNum;t-=this.winningList.length;for(let i=0;i<t;i++){let t=Math.floor(Math.random()*this.scrollList.length),e=this.scrollList[t],s=this.winningList.findIndex(t=>t.id===e.id);-1==s?this.winningList.push(e):i--}this.winningList.forEach(t=>{let i=this.userList.findIndex(i=>i.id===t.id);this.userList[i].isWinning=!0,this.winnedList.push(t)}),this.winningList.sort(()=>Math.random()-.5),this.state=3,this.fixedList=[],this.fixedIds=[],this.scrollList=[]},getLiWidth(t=!1){let i=document.querySelector(".public-list li");this.liWidth=i.offsetWidth-100+"px",t||window.addEventListener("resize",()=>{this.isFullScreen?this.liWidth=i.offsetWidth-160+"px":this.liWidth=i.offsetWidth-100+"px"})},changeUser(){if(this.fixedIds.length>this.winNum)return this.$message.error("内定人员不能超过中奖人数"),void(this.fixedIds=this.fixedIds.slice(0,this.winNum));this.fixedList=this.userList.filter(t=>-1!==this.fixedIds.findIndex(i=>i===t.id))}}}),a=l,r=(e("6897"),e("2877")),c=Object(r["a"])(a,s,n,!1,null,"3d2faed2",null);i["default"]=c.exports},6897:function(t,i,e){"use strict";e("e798")},e798:function(t,i,e){}}]);
//# sourceMappingURL=chunk-02ccb01d.0f52de98.js.map