(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07266a2c","chunk-2d213a50","chunk-2d0d326c"],{4495:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e.newIndex?e._e():t("dzs-header",{attrs:{title:"横向表单组件"}}),t("div",{staticClass:"page"},[t("h2",[e._v("基础用法")]),t("div",{staticClass:"item"},[t("dzs-form-header",{attrs:{options:e.formOptions},scopedSlots:e._u([{key:"mySlot",fn:function(){return[t("el-form-item",{attrs:{label:"自定义组件",prop:"mySlot"}},[t("el-button",[e._v("button")])],1)]},proxy:!0}])})],1),t("h2",[e._v("手机端")]),t("div",{staticClass:"item"},[t("div",{staticClass:"is-phone-public"},[t("div",{staticClass:"phone-box"},[t("dzs-form-header",{attrs:{options:e.formOptions},scopedSlots:e._u([{key:"mySlot",fn:function(){return[t("el-form-item",{attrs:{label:"自定义组件",prop:"mySlot"}},[t("el-button",[e._v("button")])],1)]},proxy:!0}])})],1)])]),t("h2",[e._v("代码示例")]),t("div",{staticClass:"item"},[t("dzs-code",{attrs:{title:"代码示例",value:e.code1}})],1),t("h2",[e._v("参数说明")]),t("div",{staticClass:"item"},[t("dzs-table",{attrs:{tableHeader:e.descHeader,list:e.descData,showOperation:!1,tableOptions:e.descTableOptions}})],1),t("h2",[e._v("组件源代码下载")]),e._m(0)]),e.newIndex?e._e():t("el-backtop",{attrs:{"visibility-height":20}})],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"item"},[t("a",{attrs:{target:"_blank",href:"https://github.com/zsduan/zsduan-summary/blob/master/src/components/dzs-form-header/index.vue"}},[e._v("横向表单组件下载地址")])])}],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-box",attrs:{id:e.fromId}},[t("el-form",e._b({ref:"dzsForm",class:{ruleForm:!0,"phone-form":e.formBoxWidth<=768},attrs:{model:e.fromModel,rules:e.fromRules,"label-position":e.labelPosition}},"el-form",{...e.formProps},!1),[t("el-row",{attrs:{gutter:e.gutter}},[e._l(e.formItem,(function(r,a){return[r.isHidden?e._e():t("el-col",{key:a,attrs:{span:r.span?r.span:6}},[r.isSlot?[e._t(r.key)]:e._e(),r.isSlot?e._e():[t("el-form-item",{attrs:{label:r.label,prop:r.key}},[r.props&&r.props.isSlot?[e._t(""+r.key)]:e._e(),"input"==r.type?[t("el-input",e._b({attrs:{value:e.getFromModelValue(r.key),placeholder:e.getPlaceholder(r)},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-input",{...r.props},!1),[r.slots?t("template",{slot:r.slots.name},[e._v(" "+e._s(r.slots.text)+" ")]):e._e()],2)]:e._e(),"number"==r.type?[t("el-input-number",e._b({attrs:{value:e.getFromModelValue(r.key),placeholder:e.getPlaceholder(r)},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-input-number",{...r.props},!1))]:e._e(),"select"==r.type?[t("el-select",e._b({attrs:{value:e.getFromModelValue(r.key),placeholder:e.getPlaceholder(r,"select")},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-select",{...r.props},!1),e._l(r.children,(function(e,r){return t("el-option",{key:e.value+r.toString(),staticStyle:{padding:"0 6px"},attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"date"==r.type?[t("el-date-picker",e._b({attrs:{value:e.getFromModelValue(r.key),placeholder:e.getPlaceholder(r,"select")},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-date-picker",{...r.props},!1))]:e._e(),"time"==r.type?[t("el-time-picker",e._b({attrs:{value:e.getFromModelValue(r.key),placeholder:e.getPlaceholder(r,"select")},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-time-picker",{...r.props},!1))]:e._e(),"checkbox"==r.type?[t("el-checkbox-group",e._b({attrs:{value:e.getFromModelValue(r.key)},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-checkbox-group",{...r.props},!1),e._l(r.children,(function(r,a){return t("el-checkbox",e._b({key:r.value+a,staticClass:"items",attrs:{label:r.value}},"el-checkbox",{...r.props},!1),[e._v(" "+e._s(r.label)+" ")])})),1)]:e._e(),"switch"==r.type?[t("el-switch",e._b({attrs:{value:e.getFromModelValue(r.key)},on:{input:function(t){return e.changeVaule(t,r.key)}}},"el-switch",{...r.props},!1))]:e._e(),e.getTips(r)&&"divider"!=r.type?t("div",{staticClass:"from-item-tips"},[e._v(" "+e._s(e.getTips(r))+" ")]):e._e()],2)]],2)]})),[t("el-col",{attrs:{span:e.btnSpan}},[e.showBtn?t("div",{class:{"form-sbumit-box":!0,"form-sbumit-box-phone":24==this.btnSpan}},[t("el-button",{staticClass:"btn",attrs:{type:"primary",icon:e.btnIcon},on:{click:function(t){return t.stopPropagation(),e.submit("dzsForm")}}},[e._v(" "+e._s(e.submitText)+" ")]),t("el-button",{staticClass:"btn cancel",attrs:{type:"info"},on:{click:function(t){return t.stopPropagation(),e.Reset.apply(null,arguments)}}},[e._v(e._s(e.resetText))]),e._t("footerBtn")],2):e._e()])]],2)],1)],1)},o=[];const n={shortcuts:[{text:"最近一周",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},p=e=>{if("object"!==typeof e||null===e)return e;let t=Array.isArray(e)?[]:{};for(let r in e)e.hasOwnProperty(r)&&(t[r]=p(e[r]));return t};var i=p,m={name:"search-form",model:{prop:"value",event:"update:value"},props:{options:{type:Object,default:()=>({})},submitText:{type:String,default:()=>"搜索"},resetText:{type:String,default:()=>"重置"},showBtn:{type:Boolean,default:()=>!0},value:{type:Object,default:()=>({})},antiShakeTime:{type:Number,default:()=>1e3},isFormData:{type:Boolean,default:()=>!1},gutter:{type:Number,default:()=>10},btnIcon:{type:String,default:()=>""}},data(){return{fromModel:{},fromRules:{},formItem:[],formProps:{},pickerOptions:n,formBoxWidth:0,labelPosition:"left",timer:null,toolbar:[],fromId:"dzsForm"+(new Date).getTime(),btnSpan:6}},watch:{options:{handler(e,t){e.formItem&&e.formItem.length&&this.initModel(e)},deep:!0,immediate:!0},value:{handler(e,t){e&&this.setFormData(e)},deep:!0,immediate:!0}},created(){},mounted(){this.listenFormBoxWidth()},methods:{getPlaceholder(e,t="input"){let r="select"==t?"请选择":"请输入",a=e.props&&e.props.placeholder?e.props.placeholder:r+e.label;return a},getTips(e){return e.props&&e.props.tips?e.props.tips:""},changeVaule(e,t){let r=t.split("."),a=this.fromModel;for(let s=0;s<r.length-1;s++)a=a[r[s]];a[r[r.length-1]]=e,this.$emit("update:value",this.fromModel),this.$emit("change",{value:e,key:t})},getFromModelValue(e){let t=e.split("."),r=this.fromModel;for(let a=0;a<t.length;a++)r=r[t[a]];return r},submit(e="dzsForm"){if(!this.timer)return this.timer=setTimeout(()=>{clearTimeout(this.timer),this.timer=null},this.antiShakeTime),new Promise((t,r)=>{this.$refs[e].validate(e=>{if(!e)return this.$message.error("请填写完整信息"),void r({code:-200,message:"请填写完整的信息"});if(this.isFormData)return void this.sendFormData(t);let a={};this.formItem.forEach(e=>{let t=e.key.split("."),r=this.fromModel;for(let a=0;a<t.length;a++)r=r[t[a]];switch(e.type){case"switch":a[e.key]=r||!1;break;default:a[e.key]=r;break}e.isNull&&delete a[e.key],a=this.transformKeysToNestedObject(a)}),this.$emit("onSubmit",a),this.$emit("update:value",a),t(a)})});this.$message({message:`请勿重复提交,${this.antiShakeTime/1e3} 秒后再试`,type:"warning"})},sendFormData(e,t){let r=new FormData;this.formItem.forEach(e=>{if(e.isNull)return;let t=e.key.split("."),a=this.fromModel;for(let r=0;r<t.length;r++)a=a[t[r]];switch(e.type){case"switch":r.append(e.key,a?"true":"false");break;case"checkbox":r.append(e.key,a.join(","));break;default:r.append(e.key,a);break}}),this.$emit("onSubmit",r),e(r)},cancel(){this.clearForm(),this.$emit("onCancel")},initModel(e){this.formProps=e.formProps||{},this.formItem=i(e.formItem);let t={};this.formItem.forEach(e=>{e.span=this.formBoxWidth<=768?24:e.span,this.value[e.key]&&(e.defaultValue=this.value[e.key]),"checkbox"!==e.type||e.defaultValue||(e.defaultValue=[]),"switch"!=e.type||e.defaultValue||(e.defaultValue=!1),"input"==e.type&&e.defaultValue&&(e.defaultValue=e.defaultValue.toString()),e.props||(e.props={}),"select"==e.type&&e.props.multiple&&!e.defaultValue&&(e.defaultValue=[]),this.fromRules[e.key]=e.rules||[],e.defaultValue&&(t[e.key]=e.defaultValue),"switch"!=e.type?t[e.key]=t[e.key]?t[e.key]:e.defaultValue||"":t[e.key]=t[e.key]?t[e.key]:e.defaultValue}),t=this.transformKeysToNestedObject(t),this.fromModel={...i(this.fromModel),...i(t)}},transformKeysToNestedObject(e){let t={};const r=Object.keys(e);for(let a=0;a<r.length;a++){const s=r[a].split("."),l=e[r[a]];let o=t;for(let e=0;e<s.length-1;e++){const t=s[e];o=o[t]||(o[t]={})}o[s[s.length-1]]=l}return t},clearForm(){this.$refs["dzsForm"].resetFields(),this.initModel(this.options),this.$emit("update:value",this.fromModel)},getFormMethod(){return this.$refs["dzsForm"]},setFormData(e){this.fromModel={...i(this.fromModel),...i(e)},setTimeout(()=>{this.fromModel={...i(this.fromModel),...i(e)}},100)},listenFormBoxWidth(){const e=new ResizeObserver(e=>{for(let t of e){const{width:e}=t.contentRect;if(this.formBoxWidth=e,this.formItem=i(this.options.formItem),!this.formItem)return;this.formItem.forEach(t=>{t.span=e<=768?24:t.span}),this.btnSpan=e<=765?24:6}});e.observe(document.querySelector("#"+this.fromId))},Reset(){this.clearForm(),this.$emit("onReset",this.fromModel)}}},c=m,d=(r("e90e"),r("2877")),u=Object(d["a"])(c,l,o,!1,null,"390714fd",null),y=u.exports,h=r("ae0f"),f=r("5c19"),k={props:{newIndex:{type:Boolean,default:()=>!1}},components:{dzsFormHeader:y},computed:{formOptions(){return{formProps:{"label-width":"100px"},formItem:[{label:"输入框",key:"input",type:"input",rules:[{required:!0,message:"请输入输入框名称",trigger:"blur"}],props:{placeholder:"请输入输入框",tips:"这个是一个输入框"},defaultValue:"我是一个默认值",span:6},{label:"下拉框",key:"select",type:"select",rules:[{required:!0,message:"请选择下拉框",trigger:"change"}],props:{placeholder:"请选择下拉框",clearable:!0},children:[{label:"参数1",value:1},{label:"参数2",value:2}],span:6},{label:"日期",key:"date",type:"date",span:6},{label:"开关",key:"switch",type:"switch",span:6},{label:"多选框",key:"checkbox",type:"checkbox",rules:[],props:{},children:[{label:"选项1",value:1},{label:"选项2",value:2}]},{label:"自定义组件",key:"mySlot",type:"input",isSlot:!0,span:6}]}}},data(){return{code1:h["code1"],descHeader:f["descHeader"],descData:f["descData"],descTableOptions:f["descTableOptions"]}}},b=k,g=Object(d["a"])(b,a,s,!1,null,"3cb93552",null);t["default"]=g.exports},"5c19":function(e,t,r){"use strict";r.r(t),r.d(t,"descHeader",(function(){return a})),r.d(t,"descTableOptions",(function(){return s})),r.d(t,"descData",(function(){return l}));const a=[{key:"key",label:"名称"},{key:"type",label:"类型",width:"120px"},{key:"parameterType",label:"参数类型",width:"120px"},{label:"说明",key:"desc"},{label:"备注",key:"remark"}],s={"row-key":"key","default-expand-all":!1,border:!0,"tree-props":{children:"children",hasChildren:"hasChildren"}},l=[{key:"options",type:"props",parameterType:"Object",desc:"配置项",remark:"",children:[{key:"formProps",type:"props",parameterType:"Object",desc:"form配置项",remark:"和el-form一致"},{key:"formItem",type:"props",parameterType:"Array",desc:"表单项配置",remark:"这一项是一个数组，数组中的每一项是一个对象",children:[{key:"label",type:"props",parameterType:"String",desc:"label名称 formItem的label",remark:"非必填"},{key:"key(防止更新失败)",type:"props",parameterType:"String",desc:"需要组合的字段 通过key来获取对应的值",remark:"支持xx.xx的参数理论可以支持无限"},{key:"type",type:"props",parameterType:"String",desc:"类型",remark:"input | select | checkbox | date | time | switch"},{key:"span",type:"props",parameterType:"Number",desc:"el-col的span",remark:"默认6"},{key:"children",type:"props",parameterType:"String",desc:"当type为select | radio | checkbox时，需要传入的数据",remark:""},{key:"defaultValue",type:"props",parameterType:"String",desc:"默认值",remark:"优先级低于v-model / v-bind:value"},{key:"isHidden",type:"props",parameterType:"Boolean",desc:"是否隐藏",remark:""},{key:"props",type:"props",parameterType:"Object",desc:"更多配置项",remark:"原生的el-form-item的props直接写在这里",children:[{key:"isSlot",type:"props",parameterType:"Boolean",desc:"是否为el-form-item的slot",remark:""}]},{key:"slots",type:"props",parameterType:"Object",desc:"内部组件的插槽",remark:"目前只支持 input类型",children:[{key:"name",type:"props",parameterType:"String",desc:"插槽名称",remark:""},{key:"text",type:"props",parameterType:"String",desc:"插槽的名称",remark:""}]},{key:"rules",type:"props",parameterType:"Array | Object",desc:"规则配置和el-form相同",remark:""},{key:"isNull",type:"props",parameterType:"Boolean",desc:"在提交时不需要把数据返回的key",remark:""},{key:"isSlot(防止更新失败)",type:"props",parameterType:"Boolean",desc:"是否为自定义组件",remark:"el-form-item全部替换掉"}]}]},{key:"value / v-model",type:"props",parameterType:"Object",desc:"表单的原始数据/修改时的数据",remark:""},{key:"submit-text",type:"props",parameterType:"String",desc:"提交按钮文字",remark:"默认提交"},{key:"reset-text",type:"props",parameterType:"String",desc:"重置按钮文字",remark:"默认重置"},{key:"showBtn",type:"props",parameterType:"Boolean",desc:"是否显示底部按钮",remark:""},{key:"antiShakeTime",type:"props",parameterType:"Number",desc:"防抖时间",remark:"默认 1000"},{key:"btnIcon",type:"props",parameterType:"String",desc:"搜索按钮的icon",remark:""},{key:"isFormData",type:"props",parameterType:"Boolean",desc:"是否以FormData的形式提交",remark:"默认false"},{key:"@search",type:"methods",parameterType:"",desc:"提交事件 返回一个promise",remark:"注意 isFormData为true时 返回的是一个FormData对象 否则返回一个对象"},{key:"@onReset",type:"methods",parameterType:"",desc:"重置事件",remark:""},{key:"@change",type:"methods",parameterType:"",desc:"改变事件",remark:""},{key:"getFormMethod()",type:"ref methods",parameterType:"",desc:"获取el-form的方法",remark:""},{key:"clearForm()",type:"ref methods",parameterType:"",desc:"将表单重置为初始值",remark:""},{key:"setFormData(data)",type:"ref methods",parameterType:"",desc:"设置表单数据",remark:"参数为一个对象 某些时候v-model失败时可以使用"}]},ae0f:function(e,t,r){"use strict";r.r(t),r.d(t,"code1",(function(){return a}));const a='\ncomputed: {\n    formOptions() {\n        return {\n            formProps: {\n                "label-width": "100px",\n            },\n            formItem: [\n                {\n                    label: "输入框",\n                    key: "input",\n                    type: "input",\n                    rules: [\n                        { required: true, message: \'请输入输入框名称\', trigger: \'blur\' },\n                    ],\n                    props: {\n                        placeholder: "请输入输入框",\n                        tips: "这个是一个输入框"\n                    },\n                    defaultValue: "我是一个默认值",\n                    span: 6\n                },\n                {\n                    label: "下拉框",\n                    key: "select",\n                    type: "select",\n                    rules: [\n                        { required: true, message: \'请选择下拉框\', trigger: \'change\' },\n                    ],\n                    props: {\n                        placeholder: "请选择下拉框",\n                        clearable: true\n                    },\n                    children: [\n                        {\n                            label: "参数1",\n                            value: 1\n                        },\n                        {\n                            label: "参数2",\n                            value: 2\n                        },\n                    ],\n                    span: 6\n                },\n                {\n                    label: "日期",\n                    key: "date",\n                    type: "date",\n                    span: 6\n                },\n                {\n                    label: "开关",\n                    key: "switch",\n                    type: "switch",\n                    span: 6\n                },\n                {\n                    label: "多选框",\n                    key: "checkbox",\n                    type: "checkbox",\n                    rules: [],\n                    props: {},\n                    children: [\n                        {\n                            label: "选项1",\n                            value: 1\n                        },\n                        {\n                            label: "选项2",\n                            value: 2\n                        },\n                    ],\n                },\n                {\n                    label: "自定义组件",\n                    key: "mySlot",\n                    type: "input",\n                    isSlot: true,\n                    span: 6\n                },\n            ]\n        }\n    }\n},\n'},c3d6:function(e,t,r){},e90e:function(e,t,r){"use strict";r("c3d6")}}]);
//# sourceMappingURL=chunk-07266a2c.454f0baa.js.map