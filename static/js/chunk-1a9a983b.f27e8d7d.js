(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a9a983b"],{"04250":function(e,t,i){"use strict";i("0b5c")},"0b5c":function(e,t,i){},"1e98":function(e,t,i){},"733b":function(e,t,i){"use strict";i("1e98")},ac93:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-box"},[t("el-form",e._b({ref:"dzsForm",staticClass:"ruleForm",attrs:{model:e.fromModel,rules:e.fromRules,"label-position":e.labelPosition},nativeOn:{submit:function(t){return t.preventDefault(),e.submit("dzsForm")}}},"el-form",{...e.formProps},!1),[t("el-row",{attrs:{gutter:10}},e._l(e.formItem,(function(i,s){return t("div",{key:s},[i.isHidden?e._e():t("el-col",{attrs:{span:i.span?i.span:24}},[i.isSlot?t("el-form-item",{attrs:{label:i.label}},[e._t(i.key)],2):e._e(),i.isSlot?e._e():t("div",["input"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-input",e._b({attrs:{placeholder:i.props&&i.props.placeholder?i.props.placeholder:"请输入"},on:{input:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-input",{...i.props},!1)),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"select"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-select",e._b({attrs:{placeholder:i.props&&i.props.placeholder?i.props.placeholder:"请选择"},on:{input:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-select",{...i.props},!1),e._l(i.children,(function(e){return t("el-option",{key:e.value,staticStyle:{padding:"0 6px"},attrs:{label:e.label,value:e.value}})})),1),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"date"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-date-picker",e._b({attrs:{placeholder:i.props&&i.props.placeholder?i.props.placeholder:"请选择日期"},on:{input:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-date-picker",{...i.props},!1)),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"color"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-color-picker",e._b({on:{input:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-color-picker",{...i.props},!1)),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"switch"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-switch",e._b({on:{input:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-switch",{...i.props},!1)),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"checkbox"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-checkbox-group",e._b({on:{change:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-checkbox-group",{...i.props},!1),e._l(i.children,(function(i,s){return t("el-checkbox",e._b({key:s,staticClass:"items",attrs:{label:i.value}},"el-checkbox",{...i.props},!1),[e._v(e._s(i.label))])})),1),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"radio"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("el-radio-group",e._b({on:{change:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"el-radio-group",{...i.props},!1),e._l(i.children,(function(i){return t("el-radio",e._b({key:i.value,staticClass:"items",attrs:{label:i.value}},"el-radio",{...i.props},!1),[e._v(e._s(i.label))])})),1),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"uploadImg"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[t("dzs-upload-img",e._b({on:{change:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"dzs-upload-img",{...i.props},!1)),i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e()],1):e._e(),"edit"==i.type?t("el-form-item",{attrs:{label:i.label,prop:i.key}},[i.props&&i.props.tips?t("div",{staticClass:"from-item-tips"},[e._v(e._s(i.props.tips))]):e._e(),t("dzs-editors",e._b({attrs:{show_save:!1},on:{save:function(t){return e.changeVaule(t,i.key)}},model:{value:e.fromModel[i.key],callback:function(t){e.$set(e.fromModel,i.key,t)},expression:"fromModel[item.key]"}},"dzs-editors",{...i.props},!1))],1):e._e(),"divider"==i.type?t("div",[t("el-divider",e._b({},"el-divider",{...i.props},!1),[i.props&&i.props.tips?t("span",[e._v(e._s(i.props.tips))]):e._e(),i.props&&i.props.icon?t("i",{class:i.props.icon}):e._e()])],1):e._e()],1)],1)],1)})),0)],1),e.showBtn?t("div",{staticClass:"form-sbumit-box"},[t("el-button",{staticClass:"btn cancel",attrs:{type:"info"},on:{click:function(t){return t.stopPropagation(),e.cancel.apply(null,arguments)}}},[e._v("取消")]),e._t("footerBtn"),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.submit("dzsForm")}}},[e._v(e._s(e.success_txt))])],2):e._e()],1)},l=[];const o={shortcuts:[{text:"最近一周",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]};var a=i("d3a1"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"upload-img-box"},[e.fileList.length?t("div",{staticClass:"show-img-box",style:e.imgStyle},e._l(e.fileList,(function(i,s){return t("div",{key:s},[t("img",{staticClass:"el-upload-list__item-thumbnail",style:e.imgStyle,attrs:{src:i.url,alt:""}}),t("div",{staticClass:"el-upload-list__item-actions",style:e.imgStyle},[t("div",{staticClass:"el-upload-actions"},[t("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.handlePictureCardPreview(i)}}}),t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.handleRemove(s)}}})])])])})),0):e._e(),t("div",{style:e.imgStyle},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.upFile,"show-file-list":!1,"list-type":"picture-card","file-list":e.fileList,limit:e.limit,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"auto-upload":e.autoUpload,"on-change":e.changeFile}},[t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},p=[],n=(i("14d9"),{name:"dzs-upload-img",model:{prop:"value",event:"update:value"},props:{upFile:{type:String,default:()=>"#"},value:{type:Array,default:()=>[]},imgStyle:{type:String,default:()=>"width:80px;height:80px;"},limit:{type:Number,default:()=>1},maxSize:{type:Number,default:()=>3},imgType:{type:String,default:()=>"image/jpeg,image/png,image/gif"},autoUpload:{type:Boolean,default:()=>!0}},data(){return{fileList:[],dialogImageUrl:"",dialogVisible:!1}},watch:{value:{handler(e){this.fileList=e},deep:!0,immediate:!0}},methods:{beforeUpload(e){let t=this.imgType.split(","),i=t.indexOf(e.type);const s=e.size/1024/1024<this.maxSize;return-1==i&&this.$message.error("请上传正确的图片格式"),s||this.$message.error(`上传图片大小不能超过 ${this.maxSize}MB!`),-1!=i&&s},handleSuccess(e,t){let i={name:t.name,path:e.path?e.path:"",uploadUrl:e.url?e.url:"",uid:t.uid,url:t.url,status:"success",fromItem:"upload-img",data:e};this.fileList.push(i),this.$emit("update:value",this.fileList),this.$emit("upload-success",i),this.$emit("change",this.fileList)},changeFile(e){if(!this.autoUpload){let t={name:e.name,path:e.url,uploadUrl:e.url,uid:e.uid,url:e.url,status:"success",fromItem:"upload-img",data:e.row};this.fileList.push(t),this.$emit("update:value",this.fileList),this.$emit("upload-success",t),this.$emit("change",this.fileList)}console.log(e)},handleExceed(e,t){this.$message.warning(`当前上传图片数量已达上限${this.limit}张`)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e){this.fileList.splice(e,1),this.$emit("change",this.fileList),this.$emit("update:value",this.fileList),this.$emit("upload-remove",this.fileList)}}}),m=n,c=(i("733b"),i("2877")),u=Object(c["a"])(m,r,p,!1,null,"7ca67e1e",null),d=u.exports,f={name:"dzs-form",components:{dzsUploadImg:d,dzsEditors:a["a"]},model:{prop:"value",event:"update:value"},props:{options:{type:Object,default:()=>({})},success_txt:{type:String,default:()=>"提交"},showBtn:{type:Boolean,default:()=>!0},value:{type:Object,default:()=>({})},fromStatus:{type:String,default:()=>""},antiShakeTime:{type:Number,default:()=>1e3}},data(){return{fromModel:{},fromRules:{},formItem:[],formProps:{},pickerOptions:o,screenWidth:document.body.clientWidth,labelPosition:"left",timer:null}},watch:{options:{handler(e,t){e.formItem&&e.formItem.length&&(this.initModel(e),this.initData(this.value||{},e))},deep:!0,immediate:!0},screenWidth:{handler(){this.options.formItem&&this.options.formItem.length&&this.initModel(this.options)}},value:{handler(e,t){e&&this.initData(this.value||{},this.options||{})},deep:!0,immediate:!0}},created(){window.onresize=()=>{this.screenWidth=document.body.clientWidth}},methods:{changeVaule(e,t){delete this.fromModel[t],this.$set(this.fromModel,t,e),this.$emit("update:value",this.fromModel),this.$emit("change",{value:e,key:t})},async submit(e="dzsForm"){let t=await this.debounce();if(t)return new Promise((t,i)=>{this.$refs[e].validate(e=>{if(!e)return this.$message.error("请填写完整信息"),i(),!1;{let e={},i=this.formItem;i.forEach(t=>{e[t.key]=this.fromModel[t.key],t.isNull&&delete e[t.key]}),this.$emit("onSubmit",e),this.$emit("update:value",e),t(e)}})})},cancel(){this.clearForm(),this.$emit("onCancel")},initData(e,t){let i=t.formItem||[],s={};i.forEach(e=>{if(e.defaultValue)s[e.key]=e.defaultValue;else switch(e.type){case"select":e.props&&e.props.multiple?s[e.key]=[]:s[e.key]="";break;case"checkbox":s[e.key]=[];break;case"uploadImg":s[e.key]=[];break;case"switch":s[e.key]=!1;break;default:s[e.key]="";break}});for(let l in e)""==e[l]&&(e[l]=s[l]);this.fromModel={...s,...e},this.$emit("update:value",this.fromModel)},initModel(e){this.labelPosition=this.screenWidth<=768?"top":"left",this.formProps=e.formProps||{},this.formItem=e.formItem,this.formItem.forEach(e=>{e.span=this.screenWidth<=768?24:e.span||24,this.fromRules[e.key]=e.rules||[]})},clearForm(){this.$refs["dzsForm"].resetFields()},getForm(){return this.$refs["dzsForm"]},setFormData(e){this.fromModel={...this.fromModel,...e}},debounce(){return new Promise((e,t)=>{if(this.timer)return this.$message({message:`请勿重复提交,${this.antiShakeTime/1e3} 秒后再试`,type:"warning"}),void e(!1);this.antiShakeTime&&(this.timer=setTimeout(()=>{clearTimeout(this.timer),this.timer=null},this.antiShakeTime)),e(!0)})}}},h=f,y=(i("04250"),Object(c["a"])(h,s,l,!1,null,"795b9125",null));t["a"]=y.exports}}]);
//# sourceMappingURL=chunk-1a9a983b.f27e8d7d.js.map