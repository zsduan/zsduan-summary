{"version":3,"sources":["webpack:///./src/assets/image/2024.png","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue","webpack:///src/views/large-screen-lottery/large-screen-lottery.vue","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?9bf6","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?96d5","webpack:///./src/views/large-screen-lottery/large-screen-lottery.vue?1e74"],"names":["module","exports","render","_vm","this","_c","_self","staticClass","style","backImg","on","fullScreen","iconSize","isFullScreen","_e","_v","attrs","changeUser","model","value","fixedIds","callback","$$v","expression","_l","userList","item","key","id","name","isWinning","_s","title","state","index","icon","background","color","width","liWidth","height","phone","scrollList","winningList","winNum","startLottery","stopLottery","resetLottery","staticRenderFns","data","require","fixedList","winnedList","timer","speed","mounted","randomUser","window","addEventListener","e","keyCode","code","beforeDestroy","exitFullscreen","removeEventListener","getLiWidth","methods","arr","i","Math","floor","random","toString","padEnd","obj","push","Object","freeze","setTimeout","requestFullScreen","el","document","cfs","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","exitFullScreen","call","ActiveXObject","wscript","SendKeys","querySelector","rfs","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","filter","user","length","$message","error","setInterval","winIndex","findIndex","win","repeatIndex","scroll","forEach","clearInterval","fix","sort","noLister","li","offsetWidth","slice","component"],"mappings":"qGAAAA,EAAOC,QAAU,IAA0B,gC,2CCA3C,IAAIC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoBC,MAAOL,EAAIM,SAAU,CAACJ,EAAG,MAAM,CAACE,YAAY,cAAcG,GAAG,CAAC,MAAQP,EAAIQ,aAAa,CAACN,EAAG,IAAI,CAACE,YAAY,sBAAsBC,MAAO,CAAE,YAAaL,EAAIS,SAAW,UAAcT,EAAIU,aAA+dV,EAAIW,KAArdT,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAG,YAAYV,EAAG,YAAY,CAACW,MAAM,CAAC,WAAa,GAAG,SAAW,GAAG,gBAAgB,GAAG,YAAc,OAAON,GAAG,CAAC,OAASP,EAAIc,YAAYC,MAAM,CAACC,MAAOhB,EAAIiB,SAAUC,SAAS,SAAUC,GAAMnB,EAAIiB,SAASE,GAAKC,WAAW,aAAapB,EAAIqB,GAAIrB,EAAIsB,UAAU,SAASC,GAAM,OAAOrB,EAAG,YAAY,CAACsB,IAAID,EAAKE,GAAGZ,MAAM,CAAC,MAAQU,EAAKG,KAAK,MAAQH,EAAKE,GAAG,SAAWF,EAAKI,gBAAe,IAAI,GAAYzB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAG5B,EAAI6B,UAAU3B,EAAG,MAAM,CAACE,YAAY,eAAe,CAAgB,IAAdJ,EAAI8B,MAAa5B,EAAG,KAAK,CAACE,YAAY,eAAeJ,EAAIqB,GAAIrB,EAAIsB,UAAU,SAASC,EAAKQ,GAAO,OAAO7B,EAAG,KAAK,CAACsB,IAAIO,GAAO,CAAGR,EAAKS,KAAiH9B,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQS,MAAM,CAAC,IAAMU,EAAKS,KAAK,IAAM,QAArM9B,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAO,CAAE4B,WAAYV,EAAKW,MAAOC,MAAOnC,EAAIoC,QAASC,OAAQrC,EAAIoC,WAA+GlC,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKG,SAASxB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKe,eAAc,GAAGtC,EAAIW,KAAoB,IAAdX,EAAI8B,MAAa5B,EAAG,KAAK,CAACE,YAAY,eAAeJ,EAAIqB,GAAIrB,EAAIuC,YAAY,SAAShB,EAAKQ,GAAO,OAAO7B,EAAG,KAAK,CAACsB,IAAIO,GAAO,CAAGR,EAAKS,KAAiH9B,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQS,MAAM,CAAC,IAAMU,EAAKS,KAAK,IAAM,QAArM9B,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAO,CAAE4B,WAAYV,EAAKW,MAAOC,MAAOnC,EAAIoC,QAASC,OAAQrC,EAAIoC,WAA+GlC,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKG,SAASxB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKe,eAAc,GAAGtC,EAAIW,KAAoB,IAAdX,EAAI8B,MAAa5B,EAAG,KAAK,CAACE,YAAY,eAAeJ,EAAIqB,GAAIrB,EAAIwC,aAAa,SAASjB,EAAKQ,GAAO,OAAO7B,EAAG,KAAK,CAACsB,IAAIO,GAAO,CAAGR,EAAKS,KAAiH9B,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQS,MAAM,CAAC,IAAMU,EAAKS,KAAK,IAAM,QAArM9B,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAO,CAAE4B,WAAYV,EAAKW,MAAOC,MAAOnC,EAAIoC,QAASC,OAAQrC,EAAIoC,WAA+GlC,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKG,SAASxB,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAGZ,EAAI4B,GAAGL,EAAKe,eAAc,GAAGtC,EAAIW,OAAOT,EAAG,MAAM,CAACE,YAAY,cAAc,CAAGJ,EAAIU,aAAoQV,EAAIW,KAA1PT,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACJ,EAAIY,GAAG,YAAYV,EAAG,kBAAkB,CAACW,MAAM,CAAC,IAAM,EAAE,IAAM,GAAG,MAAQ,QAAQE,MAAM,CAACC,MAAOhB,EAAIyC,OAAQvB,SAAS,SAAUC,GAAMnB,EAAIyC,OAAOtB,GAAKC,WAAW,aAAa,GAAYlB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAAgB,IAAdJ,EAAI8B,MAAa5B,EAAG,aAAa,CAACE,YAAY,OAAOS,MAAM,CAAC,OAAS,OAAO,QAAU,YAAY,UAAY,QAAQ,CAACX,EAAG,YAAY,CAACW,MAAM,CAAC,KAAO,WAAWN,GAAG,CAAC,MAAQP,EAAI0C,eAAe,CAAC1C,EAAIY,GAAG,WAAW,GAAGZ,EAAIW,KAAoB,IAAdX,EAAI8B,MAAa5B,EAAG,aAAa,CAACE,YAAY,OAAOS,MAAM,CAAC,OAAS,OAAO,QAAU,YAAY,UAAY,QAAQ,CAACX,EAAG,YAAY,CAACW,MAAM,CAAC,KAAO,WAAWN,GAAG,CAAC,MAAQP,EAAI2C,cAAc,CAAC3C,EAAIY,GAAG,WAAW,GAAGZ,EAAIW,KAAoB,IAAdX,EAAI8B,MAAa5B,EAAG,YAAY,CAACW,MAAM,CAAC,KAAO,UAAUN,GAAG,CAAC,MAAQP,EAAI4C,eAAe,CAAC5C,EAAIY,GAAG,QAAQZ,EAAIW,MAAM,QAEhqGkC,EAAkB,GCoEP,G,UAAA,CACfnB,KAAA,uBACAoB,OACA,OACAxC,QAAA,CACA2B,WAAA,OAAAc,EAAA,qBACA,+BAGAzB,SAAA,GAEA0B,UAAA,GACA/B,SAAA,GAEAuB,YAAA,GAEAS,WAAA,GAEAV,WAAA,GAEAE,OAAA,EAEAhC,SAAA,GAEAC,cAAA,EAEAmB,MAAA,OAEAC,MAAA,EAEAM,QAAA,EAEAc,MAAA,KAEAC,MAAA,MAGAC,UACA,KAAAC,aAEAC,OAAAC,iBAAA,UAAAC,IACA,KAAAA,EAAAC,SAAA,UAAAD,EAAAE,OACA,SAAA5B,OAAA,SAAAA,MACA,KAAAY,eACA,SAAAZ,OACA,KAAAa,kBAKAgB,gBACA,KAAAC,iBACAN,OAAAO,oBAAA,cAAAC,YACAR,OAAAO,oBAAA,mBAEAE,QAAA,CAEAV,aACA,IAAAW,EAAA,GACA,QAAAC,EAAA,EAAAA,EAAA,IAAAA,IAAA,CAEA,IAAA/B,EAAA,IAAAgC,KAAAC,MAAA,SAAAD,KAAAE,UAAAC,SAAA,IAAAC,OAAA,OACAC,EAAA,CACA9C,GAAAwC,EAAA,EACAvC,KAAA,MAAAuC,EAAA,GACA3B,MAAA,MAAA4B,KAAAC,MAAA,IAAAD,KAAAE,UACAzC,WAAA,EACAK,KAAA,GACAE,SAEA8B,EAAAQ,KAAAD,GAEA,KAAAjD,SAAAmD,OAAAC,OAAAV,GACAW,WAAA,KACA,KAAAb,cACA,MAGAtD,aACA,KAAAE,cAAA,KAAAA,aACA,KAAAA,cACA,KAAAD,SAAA,GACA,KAAAmE,sBAEA,KAAAnE,SAAA,GACA,KAAAmD,mBAIAA,iBACA,IAAAiB,EAAAC,SACAC,EAAAF,EAAAG,kBAAAH,EAAAI,wBAAAJ,EAAAK,qBAAAL,EAAAM,eACA,uBAAAJ,KACAA,EAAAK,KAAAP,QACA,uBAAAvB,OAAA+B,cAAA,CACA,IAAAC,EAAA,IAAAD,cAAA,iBACA,MAAAC,GACAA,EAAAC,SAAA,SAGAZ,WAAA,KACA,KAAAb,YAAA,IACA,MAGAc,oBACA,IAAAC,EAAAC,SAAAU,cAAA,sBACAC,EAAAZ,EAAAD,mBAAAC,EAAAa,yBAAAb,EAAAc,sBAAAd,EAAAe,oBACA,uBAAAH,KACAA,EAAAL,KAAAP,QACA,uBAAAvB,OAAA+B,cAAA,CACA,IAAAC,EAAA,IAAAD,cAAA,iBACA,MAAAC,GACAA,EAAAC,SAAA,SAGAZ,WAAA,KACA,KAAAb,YAAA,IACA,MAGApB,eAEA,IAAApB,EAAA,KAAAA,SAAAuE,OAAAC,IAAA,IAAAA,EAAAnE,WACA,KAAAc,OAAAnB,EAAAyE,OACA,KAAAC,SAAAC,MAAA,gBAGA,KAAAnE,MAAA,EACA,KAAAoB,MAAAgD,YAAA,KACA,IAAA3D,EAAA,GACA,QAAA0B,EAAA,EAAAA,EAAA,KAAAxB,OAAAwB,IAAA,CACA,IAAAlC,EAAAmC,KAAAC,MAAAD,KAAAE,SAAA,KAAA9C,SAAAyE,QACAxE,EAAA,KAAAD,SAAAS,GACAoE,EAAA,KAAAlD,WAAAmD,UAAAC,KAAA5E,KAAAF,EAAAE,IACA6E,EAAA/D,EAAA6D,UAAAG,KAAA9E,KAAAF,EAAAE,KACA,GAAA0E,IAAA,GAAAG,EACA/D,EAAAiC,KAAAjD,GAEA0C,IAGA,KAAA1B,cACA,KAAAY,OACA,KAAAW,YAAA,KAIAlB,eACA,KAAAK,WAAA,GACA,KAAAnB,MAAA,EACA,KAAAkB,UAAA,GACA,KAAAR,YAAA,GACA,KAAAlB,SAAAkF,QAAAV,KAAAnE,WAAA,IAGAgB,cACA8D,cAAA,KAAAvD,OACA,KAAAA,MAAA,KACA,KAAAV,YAAA,GACA,KAAAQ,UAAA+C,OAAA,IACA,KAAAvD,YAAA,KAAAlB,SAAAuE,OAAAC,IAAA,SAAA9C,UAAAoD,UAAAM,KAAAjF,KAAAqE,EAAArE,MAGA,IAAAgB,EAAA,KAAAnB,SAAAyE,OAAA,KAAAtD,OAAA,KAAAnB,SAAAyE,OAAA,KAAAtD,OACAA,GAAA,KAAAD,YAAAuD,OACA,QAAA9B,EAAA,EAAAA,EAAAxB,EAAAwB,IAAA,CACA,IAAAlC,EAAAmC,KAAAC,MAAAD,KAAAE,SAAA,KAAA7B,WAAAwD,QACAxE,EAAA,KAAAgB,WAAAR,GACAoE,EAAA,KAAA3D,YAAA4D,UAAAC,KAAA5E,KAAAF,EAAAE,KACA,GAAA0E,EACA,KAAA3D,YAAAgC,KAAAjD,GAEA0C,IAGA,KAAAzB,YAAAgE,QAAAH,IACA,IAAAtE,EAAA,KAAAT,SAAA8E,UAAAN,KAAArE,KAAA4E,EAAA5E,IACA,KAAAH,SAAAS,GAAAJ,WAAA,EACA,KAAAsB,WAAAuB,KAAA6B,KAIA,KAAA7D,YAAAmE,KAAA,IAAAzC,KAAAE,SAAA,IACA,KAAAtC,MAAA,EACA,KAAAkB,UAAA,GACA,KAAA/B,SAAA,GACA,KAAAsB,WAAA,IAMAuB,WAAA8C,GAAA,GACA,IAAAC,EAAA/B,SAAAU,cAAA,mBACA,KAAApD,QAAAyE,EAAAC,YAAA,SACAF,GACAtD,OAAAC,iBAAA,cACA,KAAA7C,aACA,KAAA0B,QAAAyE,EAAAC,YAAA,SAGA,KAAA1E,QAAAyE,EAAAC,YAAA,YAIAhG,aACA,QAAAG,SAAA8E,OAAA,KAAAtD,OAGA,OAFA,KAAAuD,SAAAC,MAAA,qBACA,KAAAhF,SAAA,KAAAA,SAAA8F,MAAA,OAAAtE,SAGA,KAAAO,UAAA,KAAA1B,SAAAuE,OAAAC,IAAA,SAAA7E,SAAAmF,UAAAM,OAAAZ,EAAArE,SC1R6W,I,wBCQzWuF,EAAY,eACd,EACAjH,EACA8C,GACA,EACA,KACA,WACA,MAIa,aAAAmE,E,2CCnBf,W","file":"static/js/chunk-02ccb01d.0f52de98.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/2024.f97e1a7b.png\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"large-screen-page\",style:(_vm.backImg)},[_c('div',{staticClass:\"full-screen\",on:{\"click\":_vm.fullScreen}},[_c('i',{staticClass:\"el-icon-full-screen\",style:({ 'font-size': _vm.iconSize + 'px' })})]),(!_vm.isFullScreen)?_c('div',{staticClass:\"fixed-user-change\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"内定人员选择\")]),_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeUser},model:{value:(_vm.fixedIds),callback:function ($$v) {_vm.fixedIds=$$v},expression:\"fixedIds\"}},_vm._l((_vm.userList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id,\"disabled\":item.isWinning}})}),1)],1):_vm._e(),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"lottery-box\"},[(_vm.state === 1)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.userList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e(),(_vm.state === 2)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.scrollList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e(),(_vm.state === 3)?_c('ul',{staticClass:\"public-list\"},_vm._l((_vm.winningList),function(item,index){return _c('li',{key:index},[(!item.icon)?_c('div',{staticClass:\"icon\",style:({ background: item.color, width: _vm.liWidth, height: _vm.liWidth })}):_c('div',{staticClass:\"icon\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.icon,\"alt\":\"\"}})]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"phone\"},[_vm._v(_vm._s(item.phone))])])}),0):_vm._e()]),_c('div',{staticClass:\"footer-box\"},[(!_vm.isFullScreen)?_c('div',{staticClass:\"footer-top\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"中奖人数设置\")]),_c('el-input-number',{attrs:{\"min\":1,\"max\":50,\"label\":\"描述文字\"},model:{value:(_vm.winNum),callback:function ($$v) {_vm.winNum=$$v},expression:\"winNum\"}})],1):_vm._e(),_c('div',{staticClass:\"footer-bottom\"},[(_vm.state !== 2)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击空格/按钮开始\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.startLottery}},[_vm._v(\"开始抽奖\")])],1):_vm._e(),(_vm.state === 2)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击空格/按钮结束\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.stopLottery}},[_vm._v(\"停止抽奖\")])],1):_vm._e(),(_vm.state !== 2)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.resetLottery}},[_vm._v(\"重置\")]):_vm._e()],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"large-screen-page\" :style=\"backImg\">\r\n        <div class=\"full-screen\" @click=\"fullScreen\">\r\n            <i class=\"el-icon-full-screen\" :style=\"{ 'font-size': iconSize + 'px' }\"></i>\r\n        </div>\r\n        <div class=\"fixed-user-change\" v-if=\"!isFullScreen\">\r\n            <label class=\"label\">内定人员选择</label>\r\n            <el-select v-model=\"fixedIds\" filterable multiple collapse-tags placeholder=\"请选择\" @change=\"changeUser\">\r\n                <el-option v-for=\"item in userList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"\r\n                    :disabled=\"item.isWinning\">\r\n                </el-option>\r\n            </el-select>\r\n        </div>\r\n        <div class=\"title\">{{ title }}</div>\r\n        <div class=\"lottery-box\">\r\n            <!-- 签到状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 1\">\r\n                <li v-for=\"(item, index) in userList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n            <!-- 抽奖状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 2\">\r\n                <li v-for=\"(item, index) in scrollList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n            <!-- 结束状态 -->\r\n            <ul class=\"public-list\" v-if=\"state === 3\">\r\n                <li v-for=\"(item, index) in winningList\" :key=\"index\">\r\n                    <div v-if=\"!item.icon\" class=\"icon\"\r\n                        :style=\"{ background: item.color, width: liWidth, height: liWidth }\"></div>\r\n                    <div v-else class=\"icon\">\r\n                        <img :src=\"item.icon\" alt=\"\" class=\"image\" />\r\n                    </div>\r\n                    <div class=\"name\">{{ item.name }}</div>\r\n                    <div class=\"phone\">{{ item.phone }}</div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"footer-box\">\r\n            <div class=\"footer-top\" v-if=\"!isFullScreen\">\r\n                <label class=\"label\">中奖人数设置</label>\r\n                <el-input-number v-model=\"winNum\" :min=\"1\" :max=\"50\" label=\"描述文字\"></el-input-number>\r\n            </div>\r\n            <div class=\"footer-bottom\">\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"点击空格/按钮开始\" placement=\"top\" v-if=\"state !== 2\">\r\n                    <el-button type=\"primary\" @click=\"startLottery\" >开始抽奖</el-button>\r\n                </el-tooltip>\r\n                <el-tooltip class=\"item\" effect=\"dark\" content=\"点击空格/按钮结束\" placement=\"top\" v-if=\"state === 2\">\r\n                    <el-button type=\"primary\" @click=\"stopLottery\" >停止抽奖</el-button>\r\n                </el-tooltip>\r\n                <el-button type=\"danger\" @click=\"resetLottery\" v-if=\"state !== 2\">重置</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"large-screen-lottery\",\r\n    data() {\r\n        return {\r\n            backImg: {\r\n                background: `url(${require(\"@/assets/image/2024.png\")}) no-repeat`,\r\n                'background-size': '100% 100%'\r\n            },\r\n            /**用户列表*/\r\n            userList: [],\r\n            /**内定名额列表*/\r\n            fixedList: [],\r\n            fixedIds: [],\r\n            /**中奖名额*/\r\n            winningList: [],\r\n            /**已经中奖名额*/\r\n            winnedList: [],\r\n            /**滚动列表*/\r\n            scrollList: [],\r\n            /**中奖数量*/\r\n            winNum: 5,\r\n            /**图标大小*/\r\n            iconSize: 30,\r\n            /**是否全屏*/\r\n            isFullScreen: false,\r\n            /**标题*/\r\n            title: \"XX抽奖\",\r\n            /**当前状态*/\r\n            state: 1, // 1:未开始 2:进行中 3:已结束 \r\n            /**li的宽度*/\r\n            liWidth: 0,\r\n            /**定时器*/\r\n            timer: null,\r\n            /**滚动速度 ms*/\r\n            speed: 200\r\n        }\r\n    },\r\n    mounted() {\r\n        this.randomUser();\r\n        // 监听空格键\r\n        window.addEventListener('keydown', (e) => {\r\n            if (e.keyCode === 32 || e.code === \"Space\") {\r\n                if (this.state === 1 || this.state === 3) {\r\n                    this.startLottery();\r\n                } else if (this.state === 2) {\r\n                    this.stopLottery();\r\n                }\r\n            }\r\n        });\r\n    },\r\n    beforeDestroy() {\r\n        this.exitFullscreen();\r\n        window.removeEventListener('resize', this.getLiWidth);\r\n        window.removeEventListener('keydown', () => { });\r\n    },\r\n    methods: {\r\n        /**随机生成 1000 个名额*/\r\n        randomUser() {\r\n            let arr = [];\r\n            for (let i = 0; i < 1000; i++) {\r\n                // 随机生成 16进制颜色\r\n                let color = '#' + Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');\r\n                let obj = {\r\n                    id: i + 1,\r\n                    name: `用户${i + 1}`,\r\n                    phone: `138${Math.floor(Math.random() * 100000000)}`,\r\n                    isWinning: false,\r\n                    icon: \"\",\r\n                    color: color\r\n                }\r\n                arr.push(obj);\r\n            }\r\n            this.userList = Object.freeze(arr);\r\n            setTimeout(() => {\r\n                this.getLiWidth();\r\n            }, 200);\r\n        },\r\n        /**全屏*/\r\n        fullScreen() {\r\n            this.isFullScreen = !this.isFullScreen;\r\n            if (this.isFullScreen) {\r\n                this.iconSize = 20;\r\n                this.requestFullScreen();\r\n            } else {\r\n                this.iconSize = 30;\r\n                this.exitFullscreen();\r\n            }\r\n        },\r\n        /**退出全屏*/\r\n        exitFullscreen() {\r\n            let el = document;\r\n            let cfs = el.cancelFullScreen || el.webkitCancelFullScreen || el.mozCancelFullScreen || el.exitFullScreen;\r\n            if (typeof cfs != \"undefined\" && cfs) {\r\n                cfs.call(el);\r\n            } else if (typeof window.ActiveXObject != \"undefined\") {\r\n                let wscript = new ActiveXObject(\"WScript.Shell\");\r\n                if (wscript != null) {\r\n                    wscript.SendKeys(\"{F11}\");\r\n                }\r\n            }\r\n            setTimeout(() => {\r\n                this.getLiWidth(true);\r\n            }, 200);\r\n        },\r\n        /**请求全屏*/\r\n        requestFullScreen() {\r\n            let el = document.querySelector('.large-screen-page');\r\n            let rfs = el.requestFullScreen || el.webkitRequestFullScreen || el.mozRequestFullScreen || el.msRequestFullScreen;\r\n            if (typeof rfs != \"undefined\" && rfs) {\r\n                rfs.call(el);\r\n            } else if (typeof window.ActiveXObject != \"undefined\") {\r\n                let wscript = new ActiveXObject(\"WScript.Shell\");\r\n                if (wscript != null) {\r\n                    wscript.SendKeys(\"{F11}\");\r\n                }\r\n            }\r\n            setTimeout(() => {\r\n                this.getLiWidth(true);\r\n            }, 200);\r\n        },\r\n        /**开始抽奖*/\r\n        startLottery() {\r\n            // 根据滚动人数随机推入人员信息\r\n            let userList = this.userList.filter(user => user.isWinning === false);\r\n            if (this.winNum > userList.length) {\r\n                this.$message.error(`中奖人数不能超过总人数`);\r\n                return;\r\n            }\r\n            this.state = 2;\r\n            this.timer = setInterval(() => {\r\n                let scrollList = [];\r\n                for (let i = 0; i < this.winNum; i++) {\r\n                    let index = Math.floor(Math.random() * this.userList.length);\r\n                    let item = this.userList[index];\r\n                    let winIndex = this.winnedList.findIndex(win => win.id === item.id);\r\n                    let repeatIndex = scrollList.findIndex(scroll => scroll.id === item.id);\r\n                    if (winIndex == -1 && repeatIndex == -1) {\r\n                        scrollList.push(item);\r\n                    } else {\r\n                        i--;\r\n                    }\r\n                }\r\n                this.scrollList = scrollList;\r\n            }, this.speed);\r\n            this.getLiWidth(true);\r\n\r\n        },\r\n        /**重置*/\r\n        resetLottery() {\r\n            this.winnedList = [];\r\n            this.state = 1;\r\n            this.fixedList = [];\r\n            this.winningList = [];\r\n            this.userList.forEach(user => user.isWinning = false);\r\n        },\r\n        /**停止抽奖*/\r\n        stopLottery() {\r\n            clearInterval(this.timer);\r\n            this.timer = null;\r\n            this.winningList = [];\r\n            if (this.fixedList.length > 0) {\r\n                this.winningList = this.userList.filter(user => this.fixedList.findIndex(fix => fix.id === user.id) !== -1);\r\n            }\r\n            // 剩余名额 在滚动中选择\r\n            let winNum = this.userList.length < this.winNum ? this.userList.length : this.winNum;\r\n            winNum = winNum - this.winningList.length;\r\n            for (let i = 0; i < winNum; i++) {\r\n                let index = Math.floor(Math.random() * this.scrollList.length);\r\n                let item = this.scrollList[index];\r\n                let winIndex = this.winningList.findIndex(win => win.id === item.id);\r\n                if (winIndex == -1) {\r\n                    this.winningList.push(item);\r\n                } else {\r\n                    i--;\r\n                }\r\n            }\r\n            this.winningList.forEach(win => {\r\n                let index = this.userList.findIndex(user => user.id === win.id);\r\n                this.userList[index].isWinning = true;\r\n                this.winnedList.push(win);\r\n            });\r\n\r\n            // 对中奖名单 随机排序\r\n            this.winningList.sort(() => Math.random() - 0.5);\r\n            this.state = 3;\r\n            this.fixedList = [];\r\n            this.fixedIds = [];\r\n            this.scrollList = [];\r\n        },\r\n        /**\r\n         * 动态获取li的宽度\r\n         * @param {Boolean} noLister 是否监听\r\n         * */\r\n        getLiWidth(noLister = false) {\r\n            let li = document.querySelector('.public-list li');\r\n            this.liWidth = (li.offsetWidth - 100) + 'px';\r\n            if(noLister) return ;\r\n            window.addEventListener('resize', () => {\r\n                if (this.isFullScreen) {\r\n                    this.liWidth = (li.offsetWidth - 160) + 'px';\r\n                    return;\r\n                }\r\n                this.liWidth = (li.offsetWidth - 100) + 'px';\r\n            });\r\n        },\r\n        /**内定人员选择*/\r\n        changeUser() {\r\n            if (this.fixedIds.length > this.winNum) {\r\n                this.$message.error(`内定人员不能超过中奖人数`);\r\n                this.fixedIds = this.fixedIds.slice(0, this.winNum);\r\n                return;\r\n            }\r\n            this.fixedList = this.userList.filter(user => this.fixedIds.findIndex(fix => fix === user.id) !== -1);\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.large-screen-page {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-size: 100% 100%;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n\r\n    .full-screen {\r\n        position: absolute;\r\n        right: 20px;\r\n        top: 20px;\r\n        cursor: pointer;\r\n        z-index: 999;\r\n\r\n        .el-icon-full-screen {\r\n            color: var(--ThemeColor);\r\n        }\r\n    }\r\n\r\n    .title {\r\n        font-size: 50px;\r\n        text-align: center;\r\n        padding-top: 5%;\r\n    }\r\n\r\n    .fixed-user-change {\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 60px;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .label {\r\n            font-size: 20px;\r\n            margin-right: 10px;\r\n        }\r\n    }\r\n\r\n    .lottery-box {\r\n        width: 65%;\r\n        height: 60%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        border-radius: 10px;\r\n        background: rgba(255, 255, 255, 0.5);\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.1);\r\n        overflow-y: auto;\r\n\r\n        // 隐藏滚动条\r\n        &::-webkit-scrollbar {\r\n            display: none;\r\n        }\r\n\r\n        .public-list {\r\n            display: flex;\r\n            align-items: center;\r\n            flex-wrap: wrap;\r\n            width: 100%;\r\n            justify-content: center;\r\n\r\n            li {\r\n                width: 25%;\r\n                text-align: center;\r\n                padding: 5px;\r\n\r\n                .icon {\r\n                    margin: 0 auto;\r\n                    border-radius: 50%;\r\n                    overflow: hidden;\r\n                    margin-bottom: 5px;\r\n\r\n                    .image {\r\n                        width: 100%;\r\n                        height: 100%;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .footer-box {\r\n        position: absolute;\r\n        bottom: 40px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n\r\n        .footer-top {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            margin-bottom: 20px;\r\n\r\n            .label {\r\n                font-size: 20px;\r\n                margin-right: 10px;\r\n            }\r\n        }\r\n\r\n        .footer-bottom {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./large-screen-lottery.vue?vue&type=template&id=3d2faed2&scoped=true&\"\nimport script from \"./large-screen-lottery.vue?vue&type=script&lang=js&\"\nexport * from \"./large-screen-lottery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./large-screen-lottery.vue?vue&type=style&index=0&id=3d2faed2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d2faed2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./large-screen-lottery.vue?vue&type=style&index=0&id=3d2faed2&prod&lang=less&scoped=true&\""],"sourceRoot":""}