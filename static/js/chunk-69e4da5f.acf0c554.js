(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69e4da5f","chunk-2d21af75","chunk-2d22dd79"],{a338:function(e,t,r){"use strict";r("a59e")},a59e:function(e,t,r){},b386:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("section",[t("public-item",{attrs:{title:"PC端"}},[t("dzs-search-form",{attrs:{options:e.formOptions},scopedSlots:e._u([{key:"mySlot",fn:function(){return[t("el-form-item",{attrs:{label:"自定义组件",prop:"mySlot"}},[t("el-button",[e._v("button")])],1)]},proxy:!0}])})],1),t("public-item",{attrs:{title:"手机端",code:e.code1}},[t("div",{staticClass:"phone-public"},[t("div",{staticClass:"phone-box"},[t("dzs-search-form",{attrs:{options:e.formOptions},scopedSlots:e._u([{key:"mySlot",fn:function(){return[t("el-form-item",{attrs:{label:"自定义组件",prop:"mySlot"}},[t("el-button",[e._v("button")])],1)]},proxy:!0}])})],1)])]),t("public-item",{attrs:{title:"参数说明",list:e.tableData}}),t("public-item",{attrs:{title:"组件源代码查看",links:e.links}}),t("dzs-backtop",{attrs:{target:".el-main"}})],1)},s=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dzs-form-box",attrs:{id:e.formId}},[t("el-form",e._b({ref:e.formId,class:{"phone-form":e.formBoxWidth<=768},attrs:{model:e.fromModel,rules:e.fromRules,"label-position":e.labelPosition}},"el-form",{...e.formProps},!1),[t("el-row",{attrs:{gutter:e.gutter}},[e._l(e.formItem,(function(r,o){return[r.isHidden?e._e():t("el-col",{directives:[{name:"show",rawName:"v-show",value:r.isShow,expression:"item.isShow"}],key:o,attrs:{span:r.span?r.span:6}},[r.isSlot?[e._t(r.key)]:t("dzs-form-item",{attrs:{item:r},scopedSlots:e._u([e._l(e.$slots,(function(t,r){return{key:r,fn:function(t){return[e._t(r,null,null,t)]}}})),{key:"default",fn:function(){return[t("dzs-item",{attrs:{formBoxWidth:e.formBoxWidth,value:e.getFromModelValue(r.key),item:r},on:{change:e.changeVaule}}),e.getTips(r)&&"divider"!=r.type?t("div",{staticClass:"from-item-tips"},[e._v(" "+e._s(e.getTips(r))+" ")]):e._e()]},proxy:!0}],null,!0)})],2)]})),[t("el-col",{attrs:{span:e.btnSpan}},[t("div",{class:{"form-sbumit-box":!0,"form-sbumit-box-phone":24==this.btnSpan}},[e.showButton?t("el-button",{staticClass:"btn",attrs:{type:"primary",icon:e.btnIcon},on:{click:function(t){return t.stopPropagation(),e.onSubmit()}}},[e._v(" "+e._s(e.bottonText.submitText?e.bottonText.submitText:"搜索")+" ")]):e._e(),e.showButton?t("el-button",{on:{click:function(t){return t.stopPropagation(),e.onReset.apply(null,arguments)}}},[e._v(" "+e._s(e.bottonText.resetText?e.bottonText.resetText:"重置")+" ")]):e._e(),!e.openItems&&e.spanCount>18?t("el-button",{attrs:{type:"text"},on:{click:e.openItem}},[e._v("展开"),t("i",{staticClass:"el-icon-arrow-down"})]):e._e(),e.openItems&&e.spanCount>18?t("el-button",{attrs:{type:"text"},on:{click:e.retractItem}},[e._v("收起"),t("i",{staticClass:"el-icon-arrow-up"})]):e._e(),e._t("button")],2)])]],2)],1)],1)},a=[];r("9805");const l={shortcuts:[{text:"最近一周",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick(e){const t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},i=e=>{if("object"!==typeof e||null===e)return e;let t=Array.isArray(e)?[]:{};for(let r in e)e.hasOwnProperty(r)&&(t[r]=i(e[r]));return t};var p=i,m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dzs-form-item"},[t("el-form-item",{attrs:{label:e.item.label,prop:e.item.key}},[e.item.props&&e.item.props.isSlot?[e._t(""+e.item.key)]:e._t("default")],2)],1)},u=[],c={name:"dzsFormItem",props:{item:{type:Object,default:()=>({})}}},d=c,h=r("1805"),y=Object(h["a"])(d,m,u,!1,null,null,null),f=y.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dzs-item"},["input"==e.item.type?[t("el-input",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-input",{...e.item.props},!1),[e.item.slots?t("template",{slot:e.item.slots.name},[e._v(" "+e._s(e.item.slots.text)+" ")]):e._e()],2)]:e._e(),"select"==e.item.type?[t("el-select",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-select",{...e.item.props},!1),e._l(e.item.children,(function(e,r){return t("el-option",{key:e.value+r.toString(),staticStyle:{padding:"0 6px"},attrs:{label:e.label,value:e.value}})})),1)]:e._e(),"number"==e.item.type?[t("el-input-number",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-input-number",{...e.item.props},!1))]:e._e(),"date"==e.item.type?[t("el-date-picker",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-date-picker",{...e.item.props},!1))]:e._e(),"time"==e.item.type?[t("el-time-picker",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-time-picker",{...e.item.props},!1))]:e._e(),"switch"==e.item.type?[t("el-switch",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-switch",{...e.item.props},!1))]:e._e(),"checkbox"==e.item.type?[t("el-checkbox-group",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-checkbox-group",{...e.item.props},!1),e._l(e.item.children,(function(r,o){return t("el-checkbox",e._b({key:r.value+o,staticClass:"items",attrs:{label:r.value}},"el-checkbox",{...r.props},!1),[e._v(" "+e._s(r.label)+" ")])})),1)]:e._e(),"radio"==e.item.type?[t("el-radio-group",e._b({attrs:{value:e.value},on:{input:function(t){return e.changeVaule(t,e.item.key)}}},"el-radio-group",{...e.item.props},!1),e._l(e.item.children,(function(r,o){return t("el-radio",e._b({key:r.value+o,staticClass:"items",attrs:{label:r.value}},"el-radio",{...r.props},!1),[e._v(" "+e._s(r.label)+" ")])})),1)]:e._e()],2)},k=[],v={name:"dzsItem",props:{item:{type:Object,required:!0},value:{type:[String,Number,Boolean,Object,Array,Date],required:!0},formBoxWidth:{type:Number,default:()=>0},toolbar:{type:Array,default:()=>[]}},methods:{changeVaule(e,t){this.$emit("change",e,t)}}},g=v,x=Object(h["a"])(g,b,k,!1,null,"703ec575",null),T=x.exports,S={name:"dzsSearchForm",components:{dzsFormItem:f,dzsItem:T},model:{prop:"value",event:"update:value"},props:{options:{type:Object,default:()=>({})},bottonText:{type:Object,default:()=>({submitText:"搜索",resetText:"重置"})},showButton:{type:Boolean,default:()=>!0},value:{type:Object,default:()=>({})},antiShakeTime:{type:Number,default:()=>1e3},gutter:{type:Number,default:()=>10},btnIcon:{type:String,default:()=>""}},data(){return{fromModel:{},fromRules:{},formItem:[],formProps:{},pickerOptions:l,formBoxWidth:0,labelPosition:"left",timer:null,formId:"dzsForm"+(new Date).getTime(),btnSpan:6,openItems:!1,retractItems:!1,spanCount:0}},watch:{options:{handler(e){e.formItem&&e.formItem.length&&this.initModel()},deep:!0,immediate:!0},value:{handler(e){e&&this.setFormData(e)},deep:!0,immediate:!0}},mounted(){this.listenFormBoxWidth()},methods:{initModel(e=!1,t){this.initFormProps(this.options.formProps),this.initFormItem(p(this.options.formItem),e,t)},initFormProps(e){if(!e)return;this.labelPosition=this.formBoxWidth<=768?"top":"left";let t=e["label-position"]||e["labelPosition"];t&&(this.labelPosition=t),this.formProps=e},initFormItem(e,t,r){if(r&&this.formItem.length)return void this.setItemShowspan(e);let o={},s={},n=[];const a={checkbox:[],switch:!1};e.forEach(e=>{e.span=this.formBoxWidth<=768?24:e.span,e.isShow=!0,this.value[e.key]&&(e.defaultValue=this.value[e.key]),a.hasOwnProperty(e.type)&&!e.defaultValue&&(e.defaultValue=a[e.type]),"select"==e.type&&e.props.multiple&&!e.defaultValue&&(e.defaultValue=[]),"input"==e.type&&e.defaultValue&&(e.defaultValue=e.defaultValue.toString()),"switch"!=e.type?e.defaultValue=e.defaultValue?e.defaultValue:"":e.defaultValue=!!e.defaultValue&&e.defaultValue,s[e.key]=e.rules||[],e.props||(e.props={}),e.props.placeholder=this.getPlaceholder(e,e.type),n.push(e),o[e.key]=t?e.defaultValue:this.value[e.key]||e.defaultValue}),this.fromModel=this.transformKeysToNestedObject(o),this.formItem=p(n),this.fromRules=p(s),this.setItemShowspan(e)},transformKeysToNestedObject(e){let t={};const r=Object.keys(e);for(let o=0;o<r.length;o++){const s=r[o].split("."),n=e[r[o]];let a=t;for(let e=0;e<s.length-1;e++){const t=s[e];a=a[t]||(a[t]={})}a[s[s.length-1]]=n}return t},setItemShowspan(e){let t=0;this.formItem.forEach((r,o)=>{r.span=this.formBoxWidth<=768?24:e[o].span||6,t+=r.span,r.isShow=!(t>18),this.openItems&&(r.isShow=!0),this.retractItems&&t>18&&(r.isShow=!1),this.formBoxWidth<768&&(r.isShow=!0)}),this.formBoxWidth<768&&(t=0),this.spanCount=t},getFromModelValue(e){let t=e.split("."),r=this.fromModel;for(let o=0;o<t.length;o++)r=r[t[o]];return r},getPlaceholder(e,t){const r=["date","time","select","uploadFile","uploadImg"];let o="请输入";r.includes(t)&&(o="请选择");let s=e.props&&e.props.placeholder?e.props.placeholder:o+e.label;return s},getTips(e){return e.props&&e.props.tips?e.props.tips:""},changeVaule(e,t){let r=t.split("."),o=this.fromModel;for(let s=0;s<r.length-1;s++)o=o[r[s]];o[r[r.length-1]]=e,this.$emit("update:value",this.fromModel),this.$emit("change",{value:e,key:t})},clearForm(){this.initModel(!0),setTimeout(()=>{this.$refs[this.formId].resetFields()},0),this.$emit("update:value",this.fromModel)},getFormMethod(){return this.$refs[this.formId]},setFormData(e){"{}"!=JSON.stringify(e)&&e&&(this.fromModel={...p(e)},setTimeout(()=>{this.fromModel={...p(e)}},100))},listenFormBoxWidth(){const e=new ResizeObserver(e=>{for(let t of e){const{width:e}=t.contentRect;if(this.formBoxWidth==e)return;this.formBoxWidth=e,this.labelPosition=e<=768?"top":"left",this.btnSpan=e<=765?24:6,this.initModel(!1,!0)}});e.observe(document.querySelector("#"+this.formId))},openItem(){this.openItems=!0,this.formItem.forEach(e=>{e.isShow=!0})},retractItem(){let e=0;this.formItem.forEach(t=>{e+=t.span,t.isShow=!(e>18)}),this.retractItems=!0,this.openItems=!1,setTimeout(()=>{this.retractItems=!1},200)},onReset(){this.clearForm(),this.$emit("onReset",this.fromModel)},onSubmit(){if(this.timer)return void this.$message.error(`请勿重复提交,${this.antiShakeTime/1e3} 秒后再试`);this.timer=setTimeout(()=>{clearTimeout(this.timer),this.timer=null},this.antiShakeTime);let e=[];return new Promise((t,r)=>{this.$refs[this.formId].validate(o=>{if(!o)return this.$message.error("请完善表单信息"),void r({code:-1,msg:"请完善表单信息"});this.formItem.forEach(t=>{let r=t.key.split("."),o=this.fromModel;for(let e=0;e<r.length;e++)o=o[r[e]];e[t.key]=o,t.isNull&&delete e[t.key],e=this.transformKeysToNestedObject(e)}),this.$emit("onSearch",e),this.$emit("update:value",e),t(e)})})}}},_=S,w=(r("a338"),Object(h["a"])(_,n,a,!1,null,"4c16a9fe",null)),I=w.exports;I.install=(e,t)=>{e.component(I.name,I)};var V=I,O=r("be84"),B=r("f8e6"),F={components:{dzsSearchForm:V},computed:{formOptions(){return{formProps:{"label-width":"100px"},formItem:[{label:"输入框",key:"input",type:"input",rules:[{required:!0,message:"请输入输入框名称",trigger:"blur"}],props:{placeholder:"请输入输入框",tips:"这个是一个输入框"},defaultValue:"我是一个默认值",span:6},{label:"下拉框",key:"select",type:"select",rules:[{required:!0,message:"请选择下拉框",trigger:"change"}],props:{placeholder:"请选择下拉框",clearable:!0},children:[{label:"参数1",value:1},{label:"参数2",value:2}],span:6},{label:"日期",key:"date",type:"date",span:6},{label:"开关",key:"switch",type:"switch",span:6},{label:"多选框",key:"checkbox",type:"checkbox",rules:[],props:{},children:[{label:"选项1",value:1},{label:"选项2",value:2}]},{label:"自定义组件",key:"mySlot",type:"input",isSlot:!0,span:6}]}}},data(){return{links:{href:"https://github.com/zsduan/zsduan-summary/blob/master/src/components/dzs-search-form/index.vue",title:"组件源码"},tableData:B["tableData"],code1:{title:"代码示例",code:O["code1"],lang:"vue"}}},methods:{}},z=F,P=Object(h["a"])(z,o,s,!1,null,"5129c8fa",null);t["default"]=P.exports},be84:function(e,t,r){"use strict";r.r(t),r.d(t,"code1",(function(){return o}));const o='\n<template>\n    <dzs-search-form :options="formOptions" @search="onSearch" @reset="onReset">\n        <template #mySlot>\n            <el-form-item label="自定义组件" prop="mySlot">\n                <el-button>button</el-button>\n            </el-form-item>\n        </template>\n    </dzs-search-form>\n</template>\n<script>\nimport dzsSearchForm from "@/components/dzs-search-form";\nexport default {\n    components: {\n        dzsSearchForm\n    },\n    computed: {\n        formOptions() {\n            return {\n                formProps: {\n                    "label-width": "100px",\n                },\n                formItem: [\n                    {\n                        label: "输入框",\n                        key: "input",\n                        type: "input",\n                        rules: [\n                            { required: true, message: \'请输入输入框名称\', trigger: \'blur\' },\n                        ],\n                        props: {\n                            placeholder: "请输入输入框",\n                            tips: "这个是一个输入框"\n                        },\n                        defaultValue: "我是一个默认值",\n                        span: 6\n                    },\n                    {\n                        label: "下拉框",\n                        key: "select",\n                        type: "select",\n                        rules: [\n                            { required: true, message: \'请选择下拉框\', trigger: \'change\' },\n                        ],\n                        props: {\n                            placeholder: "请选择下拉框",\n                            clearable: true\n                        },\n                        children: [\n                            {\n                                label: "参数1",\n                                value: 1\n                            },\n                            {\n                                label: "参数2",\n                                value: 2\n                            },\n                        ],\n                        span: 6\n                    },\n                    {\n                        label: "日期",\n                        key: "date",\n                        type: "date",\n                        span: 6\n                    },\n                    {\n                        label: "开关",\n                        key: "switch",\n                        type: "switch",\n                        span: 6\n                    },\n                    {\n                        label: "多选框",\n                        key: "checkbox",\n                        type: "checkbox",\n                        rules: [],\n                        props: {},\n                        children: [\n                            {\n                                label: "选项1",\n                                value: 1\n                            },\n                            {\n                                label: "选项2",\n                                value: 2\n                            },\n                        ],\n                    },\n                    {\n                        label: "自定义组件",\n                        key: "mySlot",\n                        type: "input",\n                        isSlot: true,\n                        span: 6\n                    },\n                ]\n            }\n        }\n    },\n    methods: {\n        onSearch(){\n            // do something\n        },\n        onReset(){\n            // do something\n        }\n    }\n}\n<\/script>\n'},f8e6:function(e,t,r){"use strict";r.r(t),r.d(t,"tableData",(function(){return o}));const o=[{key:"options",type:"props",parameterType:"Object",desc:"配置项",remark:"",children:[{key:"formProps",type:"props",parameterType:"Object",desc:"form配置项",remark:"和el-form一致"},{key:"formItem",type:"props",parameterType:"Array",desc:"表单项配置",remark:"这一项是一个数组，数组中的每一项是一个对象",children:[{key:"label",type:"props",parameterType:"String",desc:"label名称 formItem的label",remark:"非必填"},{key:"key(防止更新失败)",type:"props",parameterType:"String",desc:"需要组合的字段 通过key来获取对应的值",remark:"支持xx.xx的参数理论可以支持无限"},{key:"type",type:"props",parameterType:"String",desc:"类型",remark:"input | select | checkbox | date | time | switch | radio"},{key:"span",type:"props",parameterType:"Number",desc:"el-col的span",remark:"默认6"},{key:"children",type:"props",parameterType:"String",desc:"当type为select | radio | checkbox时，需要传入的数据",remark:""},{key:"defaultValue",type:"props",parameterType:"String",desc:"默认值",remark:"优先级低于v-model / v-bind:value"},{key:"isHidden",type:"props",parameterType:"Boolean",desc:"是否隐藏",remark:""},{key:"props",type:"props",parameterType:"Object",desc:"更多配置项",remark:"原生的el-form-item的props直接写在这里",children:[{key:"isSlot",type:"props",parameterType:"Boolean",desc:"是否为el-form-item的slot",remark:""}]},{key:"slots",type:"props",parameterType:"Object",desc:"内部组件的插槽",remark:"目前只支持 input类型",children:[{key:"name",type:"props",parameterType:"String",desc:"插槽名称",remark:""},{key:"text",type:"props",parameterType:"String",desc:"插槽的名称",remark:""}]},{key:"rules",type:"props",parameterType:"Array | Object",desc:"规则配置和el-form相同",remark:""},{key:"isNull",type:"props",parameterType:"Boolean",desc:"在提交时不需要把数据返回的key",remark:""},{key:"isSlot(防止更新失败)",type:"props",parameterType:"Boolean",desc:"是否为自定义组件",remark:"el-form-item全部替换掉"}]}]},{key:"value / v-model",type:"props",parameterType:"Object",desc:"表单的原始数据/修改时的数据",remark:""},{key:"bottonText",type:"props",parameterType:"Object",desc:"按钮配置",remark:"",children:[{key:"submit-text",type:"props",parameterType:"String",desc:"提交按钮文字",remark:"默认提交"},{key:"reset-text",type:"props",parameterType:"String",desc:"重置按钮文字",remark:"默认重置"}]},{key:"showButton",type:"props",parameterType:"Boolean",desc:"是否显示底部按钮",remark:""},{key:"antiShakeTime",type:"props",parameterType:"Number",desc:"防抖时间",remark:"默认 1000"},{key:"btnIcon",type:"props",parameterType:"String",desc:"搜索按钮的icon",remark:""},{key:"@onSearch",type:"methods",parameterType:"",desc:"提交事件 返回一个promise",remark:""},{key:"@onReset",type:"methods",parameterType:"",desc:"重置事件",remark:""},{key:"@change",type:"methods",parameterType:"",desc:"改变事件",remark:""},{key:"getFormMethod()",type:"ref methods",parameterType:"",desc:"获取el-form的方法",remark:""},{key:"clearForm()",type:"ref methods",parameterType:"",desc:"将表单重置为初始值",remark:""},{key:"setFormData(data)",type:"ref methods",parameterType:"",desc:"设置表单数据",remark:"参数为一个对象 某些时候v-model失败时可以使用"},{key:"button",type:"slot",parameterType:"",desc:"搜索栏按钮插槽",remark:""}]}}]);
//# sourceMappingURL=chunk-69e4da5f.acf0c554.js.map