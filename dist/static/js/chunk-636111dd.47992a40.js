(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-636111dd","chunk-2d20ec53"],{"13e6":function(e,i,n){"use strict";n("f922")},b17e:function(e,i,n){"use strict";n.r(i),n.d(i,"code1",(function(){return t})),n.d(i,"code2",(function(){return s}));const t='\n/*\n * @name 文件切片与还原 合并文件要和切片的文件相同\n * @parame fileId 读取文件的 id 可选 fileId/file/refs 任选其一\n * @parame file 文件本身 可选 fileId/file/refs 任选其一\n * @parame refs vue的ref 可选 fileId/file/refs 任选其一\n * @parame _this 全局的this指向 refs不为空可选\n * @parame type Slice 分片 Merge 合并 \n * @parame fileSize 切片大小 默认 5M\n * @parame fileName 合并的文件名称\n * @parame isSort 合并进行排序\n * @method fail 错误返回\n * @method success 成功返回 返回数据为下面的数据\n * @return { 分片返回\n     code : 200,\n     fileList : [\n        {\n            sort : number, //排序\n            file : file, //文件bold\n            file_name : string ,//文件名称\n        }\n     ], //文件分片的list数据\n     file_name : files.name //文件名称\n * }\n * @return { 合并返回\n     code : 200,\n     file : file, //文件 blod数据\n     file_name : string //文件名称\n * }\n*/ \n//使用\nimport {fileSliceAndMerge} from "@/utils/file-slice-and-merge"\n// 切片\nchangeFile1(){\n    fileSliceAndMerge({\n        refs : "myfile",\n        _this : this,\n        fileSize :1024 * 1024 * 5,\n        success : (res)=>{\n            res.fileList.forEach((v ,index) =>{\n                \n            })\n        }\n    })\n},\n',s='\n// 合并\nchangeFile2(){\n    fileSliceAndMerge({\n        refs : "myfile1",\n        _this : this,\n        type : "merge",\n        success : (res)=>{\n            \n        }\n    })\n},\n'},b62b:function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e._self._c;return i("div",[e.newIndex?e._e():i("dzs-header",{attrs:{title:"vue动态路由"}}),i("div",{staticClass:"page"},[i("div",{staticClass:"tips-box"},[e._v("大文件的切片和分割")]),i("h2",[e._v("切片")]),i("div",{staticClass:"item"},[i("input",{ref:"myfile",attrs:{type:"file"},on:{change:e.changeFile1}}),i("dzs-code",{attrs:{title:"源代码",value:e.code1}})],1),i("h2",[e._v("合并")]),i("div",{staticClass:"item"},[i("input",{ref:"myfile1",attrs:{type:"file",multiple:""},on:{change:e.changeFile2}}),i("dzs-code",{attrs:{title:"源代码",value:e.code2}})],1),i("h2",[e._v("源代码下载/查看")]),e._m(0)]),e.newIndex?e._e():i("el-backtop",{attrs:{"visibility-height":20}})],1)},s=[function(){var e=this,i=e._self._c;return i("div",{staticClass:"item"},[i("a",{attrs:{target:"_blank",href:"https://github.com/zsduan/zsduan-summary/blob/master/src/utils/file-slice-and-merge.js"}},[e._v("下载/查看地址")])])}],l=n("b17e");n("c619");const f=e=>{let i={fileId:"",file:"",refs:"",_this:null,type:"slice",fileSize:5242880,fileName:"",isSort:!0,success:e=>{},fail:e=>{}};if(i={...i,...e},!i.fileId&&!i.file&&!i.refs)return void i.fail({code:-1,msg:"fileId or file or refs must be not null"});if(i.refs&&!i._this)return void i.fail({code:-1,msg:"_this must be not null"});if(!i.type)return void i.fail({code:-1,msg:"type must be not null"});let n=null;i.refs&&(n=i._this.$refs[i.refs].files),i.fileId&&(n=document.querySelector("#"+i.fileId).files),i.file&&(n=i.file),"slice"==i.type&&r(n[0],i),"merge"==i.type&&a(n,i)},r=(e,i)=>{let n=[];for(let t=0;t<e.size;t+=i.fileSize){let s=parseInt(t/i.fileSize)+1,l={sort:s,file:e.slice(t,i.fileSize*s),file_name:e.name+"-index"};n.push(l)}i.success({code:200,fileList:n,file_name:e.name})},a=(e,i,n)=>{let t=[];if(!e.length)return void i.fail({code:-1,msg:"files is null"});if(i.isSort){let i=[];for(let n=0;n<e.length;n++)i.push(e[n].name);i=i.sort(),i.forEach(i=>{for(let n=0;n<e.length;n++)e[n].name==i&&t.push(e[n].slice(0,e[n].size))})}else t=[...e].map(e=>e.slice(0,e.size));const s=n||e[0].name.replace(/-\d+$/,""),l=new File(t,s);i.success({code:200,file:l,file_name:s})};var c={props:{newIndex:{type:Boolean,default:()=>!1}},data(){return{code1:l["code1"],code2:l["code2"]}},mounted(){},methods:{changeFile1(){f({refs:"myfile",_this:this,fileSize:5242880,success:e=>{e.fileList.forEach((i,n)=>{this.downFile(i.file,e.file_name+"-"+i.sort)})}})},changeFile2(){f({refs:"myfile1",_this:this,type:"merge",success:e=>{this.downFile(e.file,e.file_name)}})},downFile(e,i){const n=document.createElement("a");n.setAttribute("download",i),n.href=URL.createObjectURL(e),n.click()}}},o=c,d=(n("13e6"),n("e607")),u=Object(d["a"])(o,t,s,!1,null,"f063c282",null);i["default"]=u.exports},f922:function(e,i,n){}}]);
//# sourceMappingURL=chunk-636111dd.47992a40.js.map