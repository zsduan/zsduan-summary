import{n as e}from"../static/js/index-3480c9ab.js";import"./_vue@2.6.11@vue.018c1e04.js";import"./_async-validator@1.8.5@async-validator.e65fb9e0.js";import"./_babel-runtime@6.26.0@babel-runtime.fd39bdc3.js";import"./_core-js@2.6.12@core-js.a6b1d284.js";import"./_vue-router@3.6.5@vue-router.8819c4a8.js";import"./_vuex@3.6.2@vuex.6ec484f5.js";import"./_element-ui@2.15.12@element-ui.07608cd3.js";import"./_deepmerge@1.5.2@deepmerge.fba82243.js";import"./_resize-observer-polyfill@1.5.1@resize-observer-polyfill.5c8b5044.js";import"./_throttle-debounce@1.1.0@throttle-debounce.2739eac7.js";import"./_lodash@4.17.21@lodash.90986bd2.js";import"./_babel-helper-vue-jsx-merge-props@2.0.3@babel-helper-vue-jsx-merge-props.79de6b76.js";import"./_normalize-wheel@1.0.1@normalize-wheel.6188a64d.js";import"./_mavon-editor@2.10.4@mavon-editor.3db41916.js";import"./_vue-prism-editor@1.3.0@vue-prism-editor.705c8dca.js";import"./_prismjs@1.29.0@prismjs.9fa8e4a1.js";const s={name:"dzs-slide-verification",props:{ErrorRange:{type:Number,default:()=>10},isShow:{type:Boolean,default:()=>!1}},data:()=>({imgList:[{url:new URL("./assets/1.aa3a3e62.jpg",self.location).href},{url:new URL("./assets/2.46faa50f.jpg",self.location).href},{url:new URL("./assets/3.48c7a3ec.jpg",self.location).href},{url:new URL("./assets/4.bd622d07.jpg",self.location).href},{url:new URL("./assets/5.4666610e.jpg",self.location).href}],imgUrl:"",coordinate:{x:0,y:0},moveCoordinate:{x:3,y:0},isMousemove:!1,btnTips:"拖动左边滑块完成上方拼图",isSuccess:"none",is_phone:!1}),created(){this.isPc(),this.init()},watch:{isShow:{handler(){this.isPc(),this.init()},deep:!0,immediate:!0}},methods:{init(){let e=Math.floor(Math.random()*this.imgList.length)+0;e=e<0?e+e*e:e,this.imgUrl=this.imgList[e].url;let s=Math.floor(101*Math.random())+160,t=Math.floor(131*Math.random())+0;t=t<0?t+t*t:t,this.coordinate.x=s,this.coordinate.y=t,this.moveCoordinate.x=3,this.isSuccess="none"},btnMouseleave(){if(this.isMousemove=!1,this.moveCoordinate.x-this.coordinate.x>-10&&this.moveCoordinate.x-this.coordinate.x<10)return this.btnTips="验证成功!",this.isSuccess="success",void setTimeout((()=>{this.$emit("success")}),1e3);this.isSuccess="error",this.$emit("fail"),this.btnTips="验证失败，请重新滑动验证";let e=setInterval((()=>{this.moveCoordinate.x-=5,this.moveCoordinate.x<=3&&(clearInterval(e),this.moveCoordinate.x=3)}),10)},btnMouseup(){this.isMousemove=!1},btnMousedown(){this.isMousemove=!0},btnMousemove(e){if(this.isMousemove&&"success"!=this.isSuccess)if(this.is_phone){let s=e.changedTouches[0].clientX;if(s>=315||s<=3)return;s&&this.moveCoordinate.x-s<50&&(this.moveCoordinate.x=s-40>0?s-40:s)}else e.offsetX>=275||e.offsetX<=3||e.offsetX&&this.moveCoordinate.x-e.offsetX<50&&(this.moveCoordinate.x=e.offsetX)},isPc(){let e=navigator.userAgent,s=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];this.is_phone=!1;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>0){this.is_phone=!0;break}},close(){this.$emit("update:isShow",!1),this.$emit("close",!1)}}},t={};var i=e(s,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.isShow?t("div",{staticClass:"slide-verification-box"},[t("div",{staticClass:"slide-verification"},[t("div",{staticClass:"top-box"},[t("div",{staticClass:"back-img"},[t("img",{staticClass:"img",attrs:{src:e.imgUrl}})]),t("div",{staticClass:"cropping-img",style:{top:e.coordinate.y+"px",left:e.moveCoordinate.x+"px"}},[t("img",{staticClass:"img",style:{top:-e.coordinate.y+"px",left:-e.coordinate.x+"px"},attrs:{src:e.imgUrl}})]),t("div",{staticClass:"mask-box",style:{top:e.coordinate.y+"px",left:e.coordinate.x+"px"}}),"success"==e.isSuccess?t("div",{staticClass:"success-box"},[e._v(e._s(e.btnTips))]):e._e()]),e.is_phone?t("div",{staticClass:"bottom-box",on:{touchmove:function(s){return s.stopPropagation(),e.btnMousemove(s)},touchend:function(s){return s.stopPropagation(),e.btnMouseleave(s)}}},[t("div",{staticClass:"move-box",style:{width:e.moveCoordinate.x-3+"px"}}),t("div",{staticClass:"btn",style:{left:e.moveCoordinate.x+"px"},on:{touchstart:function(s){return s.stopPropagation(),e.btnMousedown(s)}}}),"success"!=e.isSuccess?t("span",{staticClass:"tips",class:"error"==e.isSuccess?"error-tips":""},[e._v(e._s(e.btnTips))]):e._e()]):t("div",{staticClass:"bottom-box",on:{mousemove:function(s){return s.stopPropagation(),e.btnMousemove(s)},mouseleave:function(s){return s.stopPropagation(),e.btnMouseleave(s)},mouseup:function(s){return s.stopPropagation(),e.btnMouseup(s)}}},[t("div",{staticClass:"move-box",style:{width:e.moveCoordinate.x-3+"px"}}),t("div",{staticClass:"btn",style:{left:e.moveCoordinate.x+"px"},on:{mousedown:function(s){return s.stopPropagation(),e.btnMousedown(s)}}}),"success"!=e.isSuccess?t("span",{staticClass:"tips",class:"error"==e.isSuccess?"error-tips":""},[e._v(e._s(e.btnTips))]):e._e()])])]):e._e()}),[],!1,o,"38500ff6",null,null);function o(e){for(let s in t)this[s]=t[s]}const n={props:{newIndex:{type:Boolean,default:()=>!1}},components:{dzsSlideVerification:function(){return i.exports}()},data:()=>({isShow:!1,code1:'\n/*\n * @name 滑动验证\n * @prop ErrorRange 误差范围 number 默认10\n * @prop isShow 是否显示\n * @method success 成功返回\n * @method fail 失败返回\n */\n// html\n<dzs-slide-verification :isShow.sync="isShow" @success="isShow = false"></dzs-slide-verification>\n// js\nimport dzsSlideVerification from "@/components/dzs-slide-verification/index.vue"\n\n'})},r={};var a=e(n,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.newIndex?e._e():t("dzs-header",{attrs:{title:"滑动验证"}}),t("div",{staticClass:"page"},[t("h2",[e._v("基础用法")]),t("div",{staticClass:"item"},[t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(s){e.isShow=!0}}},[e._v("点我打开验证")]),t("dzs-slide-verification",{attrs:{isShow:e.isShow},on:{"update:isShow":function(s){e.isShow=s},"update:is-show":function(s){e.isShow=s},success:function(s){e.isShow=!1}}}),t("dzs-code",{attrs:{title:"使用方法",value:e.code1}})],1),t("h2",[e._v("组件源代码下载")]),e._m(0)]),e.newIndex?e._e():t("el-backtop",{attrs:{"visibility-height":20}})],1)}),[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"item"},[t("a",{attrs:{target:"_blank",href:"https://github.com/zsduan/zsduan-summary/blob/master/src/components/dzs-slide-verification/index.vue"}},[e._v("滑动验证组件下载地址")])])}],!1,c,null,null,null);function c(e){for(let s in r)this[s]=r[s]}var l=function(){return a.exports}();export{l as default};
